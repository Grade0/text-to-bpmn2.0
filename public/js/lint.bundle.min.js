!function(){"use strict";const e=Object.prototype.toString,t=Object.prototype.hasOwnProperty;function n(e){return void 0===e}function i(e){return null==e}function r(t){return"[object Array]"===e.call(t)}function s(t){const n=e.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n||"[object GeneratorFunction]"===n||"[object AsyncGeneratorFunction]"===n||"[object Proxy]"===n}function o(t){return"[object String]"===e.call(t)}function a(e,n){return!i(e)&&t.call(e,n)}function p(e,t){const n=f(t);let i;return c(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function l(e,t){const n=f(t);let i=[];return c(e,(function(e,t){n(e,t)&&i.push(e)})),i}function c(e,t){let i,s;if(n(e))return;const o=r(e)?y:d;for(let n in e)if(a(e,n)&&(i=e[n],s=t(i,o(n)),!1===s))return i}function u(e,t){let n=[];return c(e,(function(e,i){n.push(t(e,i))})),n}function m(e,t,n={}){return t=function(e){return s(e)?e:t=>t[e]}(t),c(e,(function(e){let i=t(e)||"_",r=n[i];r||(r=n[i]=[]),r.push(e)})),n}function f(e){return s(e)?e:t=>t===e}function d(e){return e}function y(e){return Number(e)}function h(e,t){return e.bind(t)}function g(e,...t){return Object.assign(e,...t)}function b(e,t){let n={},i=Object(e);return c(t,(function(t){t in i&&(n[t]=e[t])})),n}function v(){}function E(e,t){this.model=e,this.properties=t}v.prototype.get=function(e){return this.$model.properties.get(this,e)},v.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},E.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(v.prototype);c(e.properties,(function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)})),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function s(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),c(e,h((function(e,t){this.set(t,e)}),this))}return s.prototype=i,s.hasType=i.$instanceOf=this.model.hasType,n.defineModel(s,t),n.defineDescriptor(s,e),s};var w={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},A={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function R(e,t){var n=A[e];return n?n(t):t}function x(e){return!!w[e]}function C(e){return!!A[e]}function P(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function S(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function M(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,c(e,h(this.registerPackage,this))}function D(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function N(e){this.model=e}function B(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function k(e){return e.replace(/^:/,"")}function I(e,t={}){this.properties=new N(this),this.factory=new E(this,this.properties),this.registry=new M(e,this.properties),this.typeCache={},this.config=t}S.prototype.build=function(){return b(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},S.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},S.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,s=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var a=r.indexOf(e);if(-1===a)throw new Error("property <"+i.name+"> not found in property list");r.splice(a,1),this.addProperty(t,n?void 0:a,o),s[i.name]=s[i.localName]=t},S.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),s=P(r[0],i),o=P(r[1],s.prefix).name,a=this.propertiesByName[o];if(!a)throw new Error("refined property <"+o+"> not found");this.replaceProperty(a,e,n),delete e.redefines},S.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},S.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},S.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},S.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},S.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)},S.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},S.prototype.hasProperty=function(e){return this.propertiesByName[e]},S.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(c(e.properties,h((function(n){n=g({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var i=n.replaces,r=n.redefines;i||r?this.redefineProperty(n,i||r,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))}),this)),i.push(e),n[r]=e)},M.prototype.getPackage=function(e){return this.packageMap[e]},M.prototype.getPackages=function(){return this.packages},M.prototype.registerPackage=function(e){e=g({},e);var t=this.packageMap;D(t,e,"prefix"),D(t,e,"uri"),c(e.types,h((function(t){this.registerType(t,e)}),this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},M.prototype.registerType=function(e,t){var n=P((e=g({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:g(e.meta||{})})).name,t.prefix),i=n.name,r={};c(e.properties,h((function(e){var t=P(e.name,n.prefix),i=t.name;x(e.type)||(e.type=P(e.type,t.prefix).name),g(e,{ns:t,name:i}),r[i]=e}),this)),g(e,{ns:n,name:i,propertiesByName:r}),c(e.extends,h((function(e){var t=P(e,n.prefix),r=this.typeMap[t.name];r.traits=r.traits||[],r.traits.push(i)}),this)),this.definePackage(e,t),this.typeMap[i]=e},M.prototype.mapTypes=function(e,t,n){var i=x(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function s(n,i){var s=P(n,x(n)?"":e.prefix);r.mapTypes(s,t,i)}function o(e){return s(e,!0)}if(!i)throw new Error("unknown type <"+e.name+">");c(i.superClass,n?o:function(e){return s(e,!1)}),t(i,!n),c(i.traits,o)},M.prototype.getEffectiveDescriptor=function(e){var t=P(e),n=new S(t);this.mapTypes(t,(function(e,t){n.addTrait(e,t)}));var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},M.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},N.prototype.set=function(e,t,n){if(!o(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;void 0===n?i?delete e[r]:delete e.$attrs[k(t)]:i?r in e?e[r]=n:B(e,i,n):e.$attrs[k(t)]=n},N.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[k(t)];var i=n.name;return!e[i]&&n.isMany&&B(e,n,[]),e[i]},N.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;delete(n=g({},n,{get:function(){return i}})).value}Object.defineProperty(e,t,n)},N.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},N.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},N.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(void 0!==r){const n=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw n;"undefined"!=typeof console&&console.warn(n)}return null},I.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},I.prototype.getType=function(e){var t=this.typeCache,n=o(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},I.prototype.createAny=function(t,r,s){var o=P(t),a={$type:t,$instanceOf:function(e){return e===this.$type},get:function(e){return this[e]},set:function(e,t){!function(e,t,r){let s=e;c(t,(function(e,o){if("number"!=typeof e&&"string"!=typeof e)throw new Error("illegal key type: "+typeof e+". Key should be of type number or string.");if("constructor"===e)throw new Error("illegal key: constructor");if("__proto__"===e)throw new Error("illegal key: __proto__");let a=t[o+1],p=s[e];void 0!==a&&i(p)&&(p=s[e]=isNaN(+a)?{}:[]),n(a)?n(r)?delete s[e]:s[e]=r:s=p}))}(this,[e],t)}},p={name:t,isGeneric:!0,ns:{prefix:o.prefix,localName:o.localName,uri:r}};return this.properties.defineDescriptor(a,p),this.properties.defineModel(a,this),this.properties.define(a,"get",{enumerable:!1,writable:!0}),this.properties.define(a,"set",{enumerable:!1,writable:!0}),this.properties.define(a,"$parent",{enumerable:!1,writable:!0}),this.properties.define(a,"$instanceOf",{enumerable:!1,writable:!0}),c(s,(function(t,n){var i;i=t,"[object Object]"===e.call(i)&&void 0!==t.value?a[t.name]=t.value:a[n]=t})),a},I.prototype.getPackage=function(e){return this.registry.getPackage(e)},I.prototype.getPackages=function(){return this.registry.getPackages()},I.prototype.getElementDescriptor=function(e){return e.$descriptor},I.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},I.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},I.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var _=String.fromCharCode,T=Object.prototype.hasOwnProperty,O=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,j={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function $(e,t,n,i){return i?T.call(j,i)?j[i]:"&"+i+";":_(t||parseInt(n,16))}function L(e){return e.length>3&&-1!==e.indexOf("&")?e.replace(O,$):e}Object.keys(j).forEach((function(e){j[e.toUpperCase()]=j[e]}));var F="non-whitespace outside of root node";function G(e){return new Error(e)}function z(e){return"missing namespace for prefix <"+e+">"}function V(e){return{get:e,enumerable:!0}}function q(e){var t,n={};for(t in e)n[t]=e[t];return n}function U(e){return e+"$uri"}function H(){return{line:0,column:0}}function K(e){throw e}function W(e){if(!this)return new W(e);var t,n,i,r,s,o,a,p,l,c=e&&e.proxy,u=K,m=H,f=!1,d=!1,y=null,h=!1;function g(e){e instanceof Error||(e=G(e)),y=e,u(e,m)}function b(e){s&&(e instanceof Error||(e=G(e)),s(e,m))}this.on=function(e,l){if("function"!=typeof l)throw G("required args <name, cb>");switch(e){case"openTag":n=l;break;case"text":t=l;break;case"closeTag":i=l;break;case"error":u=l;break;case"warn":s=l;break;case"cdata":r=l;break;case"attention":p=l;break;case"question":a=l;break;case"comment":o=l;break;default:throw G("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!=typeof e)throw G("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return d=!0,l=n,this},this.parse=function(e){if("string"!=typeof e)throw G("required args <xml=string>");return y=null,function(e){var s,u,y,v,E,w,A,R,x,C,P,S=d?[]:null,M=d?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[U(n)]=t;return i}(l):null,D=[],N=0,B=!1,k=!1,I=0,_=0,T="",O=0;function j(){if(null!==P)return P;var e,t,n,i,r,s,o,a,p,c,u,m=d&&M.xmlns,y=d&&f?[]:null,h=O,g=T,v=g.length,E={},w={};e:for(;h<v;h++)if(p=!1,!(32===(c=g.charCodeAt(h))||c<14&&c>8)){for((c<65||c>122||c>90&&c<97)&&95!==c&&58!==c&&(b("illegal first char attribute name"),p=!0),u=h+1;u<v;u++)if(!((c=g.charCodeAt(u))>96&&c<123||c>64&&c<91||c>47&&c<59||46===c||45===c||95===c)){if(32===c||c<14&&c>8){b("missing attribute value"),h=u;continue e}if(61===c)break;b("illegal attribute name char"),p=!0}if("xmlns:xmlns"===(a=g.substring(h,u))&&(b("illegal declaration of xmlns"),p=!0),34===(c=g.charCodeAt(u+1)))-1===(u=g.indexOf('"',h=u+2))&&-1!==(u=g.indexOf("'",h))&&(b("attribute value quote missmatch"),p=!0);else if(39===c)-1===(u=g.indexOf("'",h=u+2))&&-1!==(u=g.indexOf('"',h))&&(b("attribute value quote missmatch"),p=!0);else for(b("missing attribute value quotes"),p=!0,u+=1;u<v&&!(32===(c=g.charCodeAt(u+1))||c<14&&c>8);u++);for(-1===u&&(b("missing closing quotes"),u=v,p=!0),p||(s=g.substring(h,u)),h=u;u+1<v&&!(32===(c=g.charCodeAt(u+1))||c<14&&c>8);u++)h===u&&(b("illegal character after attribute end"),p=!0);if(h=u+1,!p)if(a in w)b("attribute <"+a+"> already defined");else if(w[a]=!0,d)if(f){if(null!==(r="xmlns"===a?"xmlns":120===a.charCodeAt(0)&&"xmlns:"===a.substr(0,6)?a.substr(6):null)){if(e=L(s),t=U(r),!(o=l[e])){if("xmlns"===r||t in M&&M[t]!==e)do{o="ns"+N++}while(void 0!==M[o]);else o=r;l[e]=o}M[r]!==o&&(i||(M=q(M),i=!0),M[r]=o,"xmlns"===r&&(M[U(o)]=e,m=o),M[t]=e),E[a]=s;continue}y.push(a,s)}else-1!==(c=a.indexOf(":"))?(n=M[a.substring(0,c)])?E[a=m===n?a.substr(c+1):n+a.substr(c)]=s:b(z(a.substring(0,c))):E[a]=s;else E[a]=s}if(f)for(h=0,v=y.length;h<v;h++){if(a=y[h++],s=y[h],-1!==(c=a.indexOf(":"))){if(!(n=M[a.substring(0,c)])){b(z(a.substring(0,c)));continue}a=m===n?a.substr(c+1):n+a.substr(c)}E[a]=s}return P=E}function $(){for(var t,n,i=/(\r\n|\r|\n)/g,r=0,s=0,o=0,a=_;I>=o&&(t=i.exec(e))&&!((a=t[0].length+t.index)>I);)r+=1,o=a;return-1==I?(s=a,n=e.substring(_)):0===_?n=e.substring(_,I):(s=I-o,n=-1==_?e.substring(I):e.substring(I,_+1)),{data:n,line:r,column:s}}m=$,c&&(C=Object.create({},{name:V((function(){return R})),originalName:V((function(){return x})),attrs:V(j),ns:V((function(){return M}))}));for(;-1!==_;){if(-1===(I=60===e.charCodeAt(_)?_:e.indexOf("<",_)))return D.length?g("unexpected end of file"):0===_?g("missing start tag"):void(_<e.length&&e.substring(_).trim()&&b(F));if(_!==I)if(D.length){if(t&&(t(e.substring(_,I),L,m),h))return}else if(e.substring(_,I).trim()&&(b(F),h))return;if(33===(E=e.charCodeAt(I+1))){if(91===(v=e.charCodeAt(I+2))&&"CDATA["===e.substr(I+3,6)){if(-1===(_=e.indexOf("]]>",I)))return g("unclosed cdata");if(r&&(r(e.substring(I+9,_),m),h))return;_+=3;continue}if(45===v&&45===e.charCodeAt(I+3)){if(-1===(_=e.indexOf("--\x3e",I)))return g("unclosed comment");if(o&&(o(e.substring(I+4,_),L,m),h))return;_+=3;continue}}if(63!==E){for(u=I+1;;u++){if(w=e.charCodeAt(u),isNaN(w))return _=-1,g("unclosed tag");if(34===w)u=-1!==(v=e.indexOf('"',u+1))?v:u;else if(39===w)u=-1!==(v=e.indexOf("'",u+1))?v:u;else if(62===w){_=u;break}}if(33!==E){if(P={},47===E){if(B=!1,k=!0,!D.length)return g("missing open tag");if(u=R=D.pop(),v=I+2+u.length,e.substring(I+2,v)!==u)return g("closing tag mismatch");for(;v<_;v++)if(!(32===(E=e.charCodeAt(v))||E>8&&E<14))return g("close tag")}else{if(47===e.charCodeAt(_-1)?(u=R=e.substring(I+1,_-1),B=!0,k=!0):(u=R=e.substring(I+1,_),B=!0,k=!1),!(E>96&&E<123||E>64&&E<91||95===E||58===E))return g("illegal first char nodeName");for(v=1,y=u.length;v<y;v++)if(!((E=u.charCodeAt(v))>96&&E<123||E>64&&E<91||E>47&&E<59||45===E||95===E||46==E)){if(32===E||E<14&&E>8){R=u.substring(0,v),P=null;break}return g("invalid nodeName")}k||D.push(R)}if(d){if(s=M,B&&(k||S.push(s),null===P&&(f=-1!==u.indexOf("xmlns",v))&&(O=v,T=u,j(),f=!1)),x=R,-1!==(E=R.indexOf(":"))){if(!(A=M[R.substring(0,E)]))return g("missing namespace on <"+x+">");R=R.substr(E+1)}else A=M.xmlns;A&&(R=A+":"+R)}if(B&&(O=v,T=u,n&&(c?n(C,L,k,m):n(R,j,L,k,m),h)))return;if(k){if(i&&(i(c?C:R,L,B,m),h))return;d&&(M=B?s:S.pop())}_+=1}else{if(p&&(p(e.substring(I,_+1),L,m),h))return;_+=1}}else{if(-1===(_=e.indexOf("?>",I)))return g("unclosed question");if(a&&(a(e.substring(I,_+2),m),h))return;_+=2}}}(e),m=H,h=!1,y},this.stop=function(){h=!0}}function X(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var Q={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Z="property";function J(e){return e.xml&&e.xml.serialize}function Y(e,t){return X(t)?e.prefix+":"+((n=e.localName).charAt(0).toUpperCase()+n.slice(1)):e.name;var n}function ee(e){return new Error(e)}function te(e){return e.$descriptor}function ne(e){g(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw ee("expected element");var t,n=this.elementsById,i=te(e).idProperty;if(i&&(t=e.get(i.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(t))throw new Error("illegal ID <"+t+">");if(n[t])throw ee("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function ie(){}function re(){}function se(){}function oe(e,t){this.property=e,this.context=t}function ae(e,t){this.element=t,this.propertyDesc=e}function pe(){}function le(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function ce(e,t,n){le.call(this,e,t,n)}function ue(e,t,n){this.model=e,this.context=n}function me(e){e instanceof I&&(e={model:e}),g(this,{lax:!1},e)}ie.prototype.handleEnd=function(){},ie.prototype.handleText=function(){},ie.prototype.handleNode=function(){},re.prototype=Object.create(ie.prototype),re.prototype.handleNode=function(){return this},se.prototype=Object.create(ie.prototype),se.prototype.handleText=function(e){this.body=(this.body||"")+e},oe.prototype=Object.create(se.prototype),oe.prototype.handleNode=function(e){if(this.element)throw ee("expected no sub nodes");return this.element=this.createReference(e),this},oe.prototype.handleEnd=function(){this.element.id=this.body},oe.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},ae.prototype=Object.create(se.prototype),ae.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=R(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},pe.prototype=Object.create(se.prototype),pe.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},le.prototype=Object.create(pe.prototype),le.prototype.addReference=function(e){this.context.addReference(e)},le.prototype.handleText=function(e){if(!te(this.element).bodyProperty)throw ee("unexpected body text <"+e+">");se.prototype.handleText.call(this,e)},le.prototype.handleEnd=function(){var e=this.body,t=this.element,n=te(t).bodyProperty;n&&void 0!==e&&(e=R(n.type,e),t.set(n.name,e))},le.prototype.createElement=function(e){var t,n=e.attributes,i=this.type,r=te(i),s=this.context,o=new i({}),a=this.model;return c(n,(function(e,n){var i=r.propertiesByName[n];i&&i.isReference?i.isMany?c(e.split(" "),(function(e){s.addReference({element:o,property:i.ns.name,id:e})})):s.addReference({element:o,property:i.ns.name,id:e}):(i?e=R(i.type,e):"xmlns"===n?n=":"+n:(t=P(n,r.ns.prefix),a.getPackage(t.prefix)&&s.addWarning({message:"unknown attribute <"+n+">",element:o,property:n,value:e})),o.set(n,e))})),o},le.prototype.getPropertyForNode=function(e){var t=P(e.name),n=this.type,i=this.model,r=te(n),s=t.name,o=r.propertiesByName[s];if(o&&!o.isAttr){const t=function(e){const t=J(e);return t!==Z&&(t||null)}(o);if(t){const n=e.attributes[t];if(n){const t=function(e,t,n){const i=P(e,t.xmlns),r=P(`${t[i.prefix]||i.prefix}:${i.localName}`);return function(e,t){var n=e.name,i=e.localName,r=t&&t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+":"+i.slice(r.length):n}(r,n.getPackage(r.prefix))}(n,e.ns,i);return g({},o,{effectiveType:te(i.getType(t)).name})}}return o}var a=i.getPackage(t.prefix);if(a){const e=Y(t,a),n=i.getType(e);if(o=p(r.properties,(function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)})))return g({},o,{effectiveType:te(n).name})}else if(o=p(r.properties,(function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type})))return o;throw ee("unrecognized element <"+t.name+">")},le.prototype.toString=function(){return"ElementDescriptor["+te(this.type).name+"]"},le.prototype.valueHandler=function(e,t){return new ae(e,t)},le.prototype.referenceHandler=function(e){return new oe(e,this.context)},le.prototype.handler=function(e){return"Element"===e?new ue(this.model,e,this.context):new le(this.model,e,this.context)},le.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,C(n=t.effectiveType||t.type))return this.valueHandler(t,i);var s=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==s&&(t.isMany?i.get(t.name).push(s):i.set(t.name,s),t.isReference?(g(s,{element:i}),this.context.addReference(s)):s.$parent=i),r},ce.prototype=Object.create(le.prototype),ce.prototype.createElement=function(e){var t=e.name,n=P(t),i=this.model,r=this.type,s=i.getPackage(n.prefix),o=s&&Y(n,s)||t;if(!r.hasType(o))throw ee("unexpected element <"+e.originalName+">");return le.prototype.createElement.call(this,e)},ue.prototype=Object.create(pe.prototype),ue.prototype.createElement=function(e){var t=e.name,n=P(t).prefix,i=e.ns[n+"$uri"],r=e.attributes;return this.model.createAny(t,i,r)},ue.prototype.handleChild=function(e){var t=new ue(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},ue.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},me.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof le?(i=t,t={}):"string"==typeof t?(i=this.handler(t),t={}):"string"==typeof i&&(i=this.handler(i));var r=this.model,s=this.lax,o=new ne(g({},t,{rootHandler:i})),a=new W({proxy:!0}),p=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function l(e,t,n){var i=t(),r=i.line,s=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var p="unparsable content "+(a?a+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+s+"\n\tnested error: "+e.message;if(n)return o.addWarning({message:p,error:e}),!0;throw ee(p)}function c(e,t){return l(e,t,!0)}i.context=o,p.push(i);var u=/^<\?xml /i,m=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function d(e,t){try{p.peek().handleText(e)}catch(e){c(e,t)}}var y=r.getPackages().reduce((function(e,t){return e[t.uri]=t.prefix,e}),Object.entries(Q).reduce((function(e,[t,n]){return e[n]=t,e}),r.config&&r.config.nsMap||{}));return a.ns(y).on("openTag",(function(e,t,n,i){var r=e.attrs||{},o=Object.keys(r).reduce((function(e,n){var i=t(r[n]);return e[n]=i,e}),{});!function(e,t){var n=p.peek();try{p.push(n.handleNode(e))}catch(e){l(e,t,s)&&p.push(new re)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},i)})).on("question",(function(e){if(u.test(e)){var t=m.exec(e),n=t&&t[1];n&&!f.test(n)&&o.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}})).on("closeTag",(function(){p.pop().handleEnd()})).on("cdata",d).on("text",(function(e,t,n){!function(e,t){e.trim()&&d(e,t)}(t(e),n)})).on("error",l).on("warn",c),new Promise((function(t,n){var r;try{a.parse(e),function(){var e,t,n=o.elementsById,i=o.references;for(e=0;t=i[e];e++){var r=t.element,s=n[t.id],a=te(r).propertiesByName[t.property];if(s||o.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var p=r.get(a.name),l=p.indexOf(t);-1===l&&(l=p.length),s?p[l]=s:p.splice(l,1)}else r.set(a.name,s)}}()}catch(e){r=e}var s=i.element;r||s||(r=ee("failed to parse document as <"+i.type.$descriptor.name+">"));var p=o.warnings,l=o.references,c=o.elementsById;return r?(r.warnings=p,n(r)):t({rootElement:s,elementsById:c,references:l,warnings:p})}))},me.prototype.handler=function(e){return new ce(this.model,e)};var fe=/<|>|'|"|&|\n\r|\n/g,de=/<|>|&/g;function ye(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}function he(e,t){return X(t)?(n=e).charAt(0).toLowerCase()+n.slice(1):e;var n}function ge(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function be(e){return o(e)?e:(e.prefix?e.prefix+":":"")+e.localName}ye.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e},ye.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]},ye.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)},ye.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)},ye.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)},ye.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t},ye.prototype.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},ye.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)},ye.prototype.getUsed=function(e){return[].concat(this.wellknown,this.custom).filter((e=>{var t=this.getNSKey(e);return this.used[t]}))};var ve={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Ee={"<":"lt",">":"gt","&":"amp"};function we(e,t,n){return(e=o(e)?e:""+e).replace(t,(function(e){return"&"+n[e]+";"}))}function Ae(e){this.tagName=e}function Re(){}function xe(e){this.tagName=e}function Ce(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Pe(e,t,n){Ce.call(this,e,t),this.serialization=n}function Se(){this.value="",this.write=function(e){this.value+=e}}function Me(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function De(e){return e=g({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var i=n||new Se,r=new Me(i,e.format);e.preamble&&r.append('<?xml version="1.0" encoding="UTF-8"?>\n');var s=new Ce,o=t.$model;if(s.getNamespaces().mapDefaultPrefixes(function(e){const t=e.config&&e.config.nsMap||{},n={};for(const e in Q)n[e]=Q[e];for(const e in t){n[t[e]]=e}for(const t of e.getPackages())n[t.prefix]=t.uri;return n}(o)),s.build(t).serializeTo(r),!n)return i.value}}}function Ne(e,t){I.call(this,e,t)}Ae.prototype.build=function(e){return this.element=e,this},Ae.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Re.prototype.serializeValue=Re.prototype.serializeTo=function(e){e.append(this.escape?we(this.value,de,Ee):this.value)},Re.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(de)&&(this.escape=!0),this},ge(xe,Re),xe.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},Ce.prototype.build=function(e){this.element=e;var t,n,i=e.$descriptor,r=this.propertyDescriptor,s=i.isGeneric;return t=s?this.parseGenericNsAttributes(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),s?this.parseGenericContainments(e):(n=function(e){return l(e.$descriptor.properties,(function(t){var n=t.name;if(t.isVirtual)return!1;if(!a(e,n))return!1;var i=e[n];return i!==t.default&&null!==i&&(!t.isMany||i.length)}))}(e),this.parseAttributes(l(n,(function(e){return e.isAttr}))),this.parseContainments(function(e){return l(e,(function(e){return!e.isAttr}))}(n))),this.parseGenericAttributes(e,t),this},Ce.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?g({localName:t.ns.localName},e):g({localName:he(t.ns.localName,t.$pkg)},e)}(this.logNamespaceUsed(e.ns),e)},Ce.prototype.nsPropertyTagName=function(e){return function(e,t){return g({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},Ce.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},Ce.prototype.nsAttributeName=function(e){var t;if(t=o(e)?P(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:g({localName:t.localName},n)},Ce.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter((([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n))).map((([e,t])=>({name:e,value:t})))},Ce.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push((new Re).build({type:"String"},t));var n=e.$children;n&&c(n,(e=>{this.body.push(new Ce(this).build(e))}))},Ce.prototype.parseNsAttribute=function(e,t,n){var i,r=e.$model,s=P(t);if("xmlns"===s.prefix&&(i={prefix:s.localName,uri:n}),s.prefix||"xmlns"!==s.localName||(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var o=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(o)}},Ce.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return c(n,(function(n,r){var s=t.parseNsAttribute(e,r,n);s&&i.push(s)})),i},Ce.prototype.parseGenericAttributes=function(e,t){var n=this;c(t,(function(t){try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){"undefined"!=typeof console&&console.warn(`missing namespace information for <${t.name}=${t.value}> on`,e,n)}}))},Ce.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;c(e,(function(e){var r=i.get(e.name),s=e.isReference;if(e.isMany||(r=[r]),e.isBody)n.push((new Re).build(e,r[0]));else if(C(e.type))c(r,(function(i){n.push(new xe(t.addTagName(t.nsPropertyTagName(e))).build(e,i))}));else if(s)c(r,(function(i){n.push(new Ae(t.addTagName(t.nsPropertyTagName(e))).build(i))}));else{var o=J(e);c(r,(function(i){var r;r=o?o===Z?new Ce(t,e):new Pe(t,e,o):new Ce(t),n.push(r.build(i))}))}}))},Ce.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new ye(t):n=t),n},Ce.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,s=e.prefix;return i.byUri(r)&&!n||i.add(e,t),i.mapPrefix(s,r),e},Ce.prototype.logNamespaceUsed=function(e,t){var n,i,r,s=this.getNamespaces(t),o=e.prefix,a=e.uri;if(!o&&!a)return{localName:e.localName};if(r=s.defaultUriByPrefix(o),!(a=a||r||s.uriByPrefix(o)))throw new Error("no namespace uri given for prefix <"+o+">");if((e=s.byUri(a))||o||(e=this.logNamespace({uri:a},r===a,!0)),!e){for(n=o,i=1;s.uriByPrefix(n);)n=o+"_"+i++;e=this.logNamespace({prefix:n,uri:a},r===a)}return o&&s.mapPrefix(o,a),e},Ce.prototype.parseAttributes=function(e){var t=this,n=this.element;c(e,(function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var r=[];c(i,(function(e){r.push(e.id)})),i=r.join(" ")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)}))},Ce.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),be(e)},Ce.prototype.addAttribute=function(e,t){var n=this.attrs;o(t)&&(t=we(t,fe,ve));var i=function(e,t){const n=f(t);let i=r(e)?-1:void 0;return c(e,(function(e,t){if(n(e,t))return i=t,!1})),i}(n,(function(t){return t.name.localName===e.localName&&t.name.uri===e.uri&&t.name.prefix===e.prefix})),s={name:e,value:t};-1!==i?n.splice(i,1,s):n.push(s)},Ce.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return e.getUsed().filter((function(e){return"xml"!==e.prefix})).map((function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}))}(n).concat(t)),c(t,(function(t){e.append(" ").append(be(t.name)).append('="').append(t.value).append('"')}))},Ce.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Re;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),c(this.body,(function(t){t.serializeTo(e)})),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()},ge(Pe,Ce),Pe.prototype.parseNsAttributes=function(e){var t=Ce.prototype.parseNsAttributes.call(this,e).filter((e=>e.name!==this.serialization)),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),s=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+s+n.ns.localName),t},Pe.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},Ne.prototype=Object.create(I.prototype),Ne.prototype.fromXML=function(e,t,n){o(t)||(n=t,t="bpmn:Definitions");var i=new me(g({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)},Ne.prototype.toXML=function(e,t){var n=new De(t);return new Promise((function(t,i){try{return t({xml:n.toXML(e)})}catch(e){return i(e)}}))};const Be={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function ke(e,t){return new Ne(g({},Be,e),t)}function Ie(e){return!!e.attachedToRef}function _e(e,t,n=new Set){if(e===t)return!0;if(n.has(e))return!1;if(n.add(e),!e.outgoing||0===e.outgoing.length)return!1;for(let i of e.outgoing.map((e=>e.targetRef)))if(_e(i,t,n))return!0;return!1}class Te{constructor(){this.grid=[]}add(e,t){if(!t)return void this._addStart(e);const[n,i]=t;if(n||i||this._addStart(e),this.grid[n]||(this.grid[n]=[]),this.grid[n][i])throw new Error("Grid is occupied please ensure the place you insert at is not occupied");this.grid[n][i]=e}createRow(e){e||this.grid.push([]),this.grid.splice(e+1,0,[])}_addStart(e){this.grid.push([e])}addAfter(e,t){e||this._addStart(t);const[n,i]=this.find(e);this.grid[n].splice(i+1,0,t)}addBelow(e,t){e||this._addStart(t);const[n,i]=this.find(e);if(this.grid[n+1]||(this.grid[n+1]=[]),this.grid[n+1][i]&&this.grid.splice(n+1,0,[]),this.grid[n+1][i])throw new Error("Grid is occupied and we could not find a place - this should not happen");this.grid[n+1][i]=t}find(e){let t,n;return t=this.grid.findIndex((t=>(n=t.findIndex((t=>t===e)),-1!==n))),[t,n]}get(e,t){return(this.grid[e]||[])[t]}getElementsInRange({row:e,col:t},{row:n,col:i}){const r=[];e>n&&([e,n]=[n,e]),t>i&&([t,i]=[i,t]);for(let s=e;s<=n;s++)for(let e=t;e<=i;e++){const t=this.get(s,e);t&&r.push(t)}return r}adjustGridPosition(e){let[t,n]=this.find(e);const[,i]=this.getGridDimensions();n<i-1&&(this.grid[t].length=i,this.grid[t][i]=e,this.grid[t][n]=null)}adjustRowForMultipleIncoming(e,t){const n=e.map((e=>this.find(e))),i=Math.min(...n.map((e=>e[0])).filter((e=>e>=0))),[r,s]=this.find(t);i<r&&!this.grid[i][s]&&(this.grid[i][s]=t,this.grid[r][s]=null)}adjustColumnForMultipleIncoming(e,t){const n=e.map((e=>this.find(e))),i=Math.max(...n.map((e=>e[1])).filter((e=>e>=0))),[r,s]=this.find(t);i+1>s&&(this.grid[r][i+1]=t,this.grid[r][s]=null)}getAllElements(){const e=[];for(let t=0;t<this.grid.length;t++)for(let n=0;n<this.grid[t].length;n++){const i=this.get(t,n);i&&e.push(i)}return e}getGridDimensions(){const e=this.grid.length;let t=0;for(let n=0;n<e;n++){const e=this.grid[n].length;e>t&&(t=e)}return[e,t]}elementsByPosition(){const e=[];return this.grid.forEach(((t,n)=>{t.forEach(((t,i)=>{t&&e.push({element:t,row:n,col:i})}))})),e}getElementsTotal(){const e=this.grid.flat();return new Set(e.filter((e=>e))).size}}class Oe{constructor(e){this.moddle=e}create(e,t){return this.moddle.create(e,t||{})}createDiBounds(e){return this.create("dc:Bounds",e)}createDiLabel(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})}createDiShape(e,t,n){return this.create("bpmndi:BPMNShape",g({bpmnElement:e,bounds:this.createDiBounds(t)},n))}createDiWaypoints(e){var t=this;return u(e,(function(e){return t.createDiWaypoint(e)}))}createDiWaypoint(e){return this.create("dc:Point",b(e,["x","y"]))}createDiEdge(e,t,n){return this.create("bpmndi:BPMNEdge",g({bpmnElement:e,waypoint:this.createDiWaypoints(t)},n))}createDiPlane(e){return this.create("bpmndi:BPMNPlane",e)}createDiDiagram(e){return this.create("bpmndi:BPMNDiagram",e)}}function je(e,t){return e.$instanceOf(t)}const $e=150,Le=140;function Fe(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Ge(e,t,n="r",i="top-left"){if("h"===n&&(n=/left/.test(i)?"l":"r"),"v"===n&&(n=/top/.test(i)?"t":"b"),"t"===n)return{original:e,x:e.x,y:t.y};if("r"===n)return{original:e,x:t.x+t.width,y:e.y};if("b"===n)return{original:e,x:e.x,y:t.y+t.height};if("l"===n)return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function ze(e,t,n){const i=e.di,r=t.di,s=i.get("bounds"),o=r.get("bounds"),a=Fe(s),p=Fe(o),l=t.gridPosition.col-e.gridPosition.col,c=t.gridPosition.row-e.gridPosition.row,u=`${c>0?"bottom":"top"}-${l>0?"right":"left"}`,m=`${c>0?"top":"bottom"}-${l>0?"left":"right"}`;if(0===l&&0===c){const{x:t,y:n}=(f=e.gridPosition.row,d=e.gridPosition.col,{width:$e,height:Le,x:d*$e,y:f*Le});return[Ge(a,s,"r",u),{x:t+$e,y:a.y},{x:t+$e,y:n},{x:p.x,y:n},Ge(p,o,"t",m)]}var f,d;if(0===c)return qe(e,t,n)?[Ge(a,s,"b"),{x:a.x,y:a.y+70},{x:p.x,y:a.y+70},Ge(p,o,"b")]:[Ge(a,s,"h",u),Ge(p,o,"h",m)];if(0===l){if(qe(e,t,n)){const e=-Math.sign(c)*Le/2;return[Ge(a,s,"r"),{x:a.x+75,y:a.y},{x:p.x+75,y:p.y+e},{x:p.x,y:p.y+e},Ge(p,o,Math.sign(e)>0?"b":"t")]}return[Ge(a,s,"v",u),Ge(p,o,"v",m)]}if(l<0&&c<=0)return[Ge(a,s,"b"),{x:a.x,y:a.y+70},{x:p.x,y:a.y+70},Ge(p,o,"b")];const y=function(e,t,n){const{row:i,col:r}=e.gridPosition,{row:s,col:o}=t.gridPosition,a=o-r,p=s-i;if(!(a>0&&0!==p))return;if(p>0){let e=0;const t={row:s,col:r};return e+=n.getElementsInRange({row:i,col:r},t).length,e+=n.getElementsInRange(t,{row:s,col:o}).length,!(e>2)&&["v","h"]}{let e=0;const t={row:i,col:o};return e+=n.getElementsInRange({row:i,col:r},t).length,e+=n.getElementsInRange(t,{row:s,col:o}).length,!(e>2)&&["h","v"]}}(e,t,n);if(y){const e=Ge(a,s,y[0],u),t=Ge(p,o,y[1],m);return[e,"h"===y[0]?{x:t.x,y:e.y}:{x:e.x,y:t.y},t]}const h=-Math.sign(c)*Le/2;return[Ge(a,s,"r",u),{x:a.x+75,y:a.y},{x:a.x+75,y:p.y+h},{x:p.x-75,y:p.y+h},{x:p.x-75,y:p.y},Ge(p,o,"l",m)]}function Ve(e,t,n,i){const{width:r,height:s}=function(e){return je(e,"bpmn:SubProcess")||je(e,"bpmn:Task")?{width:100,height:80}:je(e,"bpmn:Gateway")?{width:50,height:50}:je(e,"bpmn:Event")?{width:36,height:36}:je(e,"bpmn:Participant")||je(e,"bpmn:Lane")?{width:400,height:100}:je(e,"bpmn:DataObjectReference")?{width:36,height:50}:je(e,"bpmn:DataStoreReference")?{width:50,height:50}:je(e,"bpmn:TextAnnotation")?{width:100,height:30}:{width:100,height:80}}(e);if(!i)return{width:r,height:s,x:n*$e+($e-r)/2,y:t*Le+(Le-s)/2};const o=Ve(i,t,n);return{width:r,height:s,x:Math.round(o.x+o.width/2-r/2),y:Math.round(o.y+o.height-s/2)}}function qe(e,t,n){const{row:i,col:r}=e.gridPosition,{row:s,col:o}=t.gridPosition,a=s-i;let p=0;return o-r&&(p+=n.getElementsInRange({row:i,col:r},{row:i,col:o}).length),a&&(p+=n.getElementsInRange({row:i,col:o},{row:s,col:o}).length),p>2}var Ue={addToGrid:({element:e,grid:t,visited:n,stack:i})=>{let r=[];const s=(e.outgoing||[]).map((e=>e.targetRef)).filter((e=>e));let o=null;return s.length>1&&s.every((e=>je(e,"bpmn:Task")))&&t.adjustGridPosition(e),s.forEach(((s,a,p)=>{n.has(s)||(o||i.length>0)&&function(e,t){if(e.incoming.length>1)for(const n of e.incoming)if(!t.has(n.sourceRef))return!0;return!1}(s,n)&&!function(e,t){for(const n of e.incoming)if(!t.has(n.sourceRef))return _e(e,n.sourceRef)}(s,n)||(o?je(e,"bpmn:ExclusiveGateway")&&je(s,"bpmn:ExclusiveGateway")?t.addAfter(o,s):t.addBelow(p[a-1],s):t.addAfter(e,s),s!==e&&(o=s),r.unshift(s),n.add(s))})),r=function(e,t){const n=e.filter((e=>!je(e,t)));return[...e.filter((e=>je(e,t))),...n]}(r,"bpmn:ExclusiveGateway"),r},createConnectionDi:({element:e,row:t,col:n,layoutGrid:i,diFactory:r})=>(e.outgoing||[]).map((t=>{const n=t.targetRef,s=ze(e,n,i);return r.createDiEdge(t,s,{id:t.id+"_di"})}))};const He=[{createElementDi:({element:e,row:t,col:n,diFactory:i})=>{const r=Ve(e,t,n),s={id:e.id+"_di"};je(e,"bpmn:ExclusiveGateway")&&(s.isMarkerVisible=!0);const o=i.createDiShape(e,r,s);return e.di=o,e.gridPosition={row:t,col:n},o}},{addToGrid:({element:e,grid:t,visited:n})=>{const i=(e.incoming||[]).map((e=>e.sourceRef)).filter((e=>e));return i.length>1&&(t.adjustColumnForMultipleIncoming(i,e),t.adjustRowForMultipleIncoming(i,e)),[]}},Ue,{addToGrid:({element:e,grid:t,visited:n})=>{const i=[];return(e.attachers||[]).map((e=>(e.outgoing||[]).reverse())).flat().map((e=>e.targetRef)).forEach(((r,s,o)=>{n.has(r)||(!function(e,t,n){const[i,r]=n.find(t);(n.get(i+1,r)||n.get(i+1,r+1))&&n.createRow(i);n.add(e,[i+1,r+1])}(r,e,t),i.push(r))})),i},createElementDi:({element:e,row:t,col:n,diFactory:i})=>{const r=Ve(e,t,n),s=[];return(e.attachers||[]).forEach(((o,a,p)=>{o.gridPosition={row:t,col:n};const l=Ve(o,t,n,e);l.x=r.x+(a+1)*(r.width/(p.length+1))-l.width/2;const c=i.createDiShape(o,l,{id:o.id+"_di"});o.di=c,o.gridPosition={row:t,col:n},s.push(c)})),s},createConnectionDi:({element:e,row:t,col:n,layoutGrid:i,diFactory:r})=>(e.attachers||[]).flatMap((e=>(e.outgoing||[]).map((s=>{const o=s.targetRef,a=ze(e,o,i);!function(e,t,[n,i]){const r=e.di.get("bounds"),s=Ge(Fe(r),r,"b");if(t[0].x===s.x&&t[0].y===s.y)return;if(2===t.length){const e=[s,{x:s.x,y:(n+1)*Le},{x:(i+1)*$e,y:(n+1)*Le},{x:(i+1)*$e,y:(n+.5)*Le}];return void t.splice(0,1,...e)}const o=[s,{x:s.x,y:(n+1)*Le},{x:t[1].x,y:(n+1)*Le}];t.splice(0,1,...o)}(e,a,[t,n]);return r.createDiEdge(s,a,{id:s.id+"_di"})}))))}];class Ke{constructor(){this.moddle=new ke,this.diFactory=new Oe(this.moddle),this._handlers=He}handle(e,t){return this._handlers.filter((t=>s(t[e]))).map((n=>n[e](t)))}async layoutProcess(e){const{rootElement:t}=await this.moddle.fromXML(e);this.diagram=t;const n=this.getProcess();return n&&(this.cleanDi(),this.handlePlane(n)),(await this.moddle.toXML(this.diagram,{format:!0})).xml}handlePlane(e){const t=this.createGridLayout(e);this.generateDi(e,t)}cleanDi(){this.diagram.diagrams=[]}createGridLayout(e){const t=new Te,n=e.flowElements||[],i=n.filter((e=>!je(e,"bpmn:SequenceFlow")));if(!n)return t;const r=n.filter((e=>{return!(t=e,t.sourceRef||Ie(e)||e.incoming&&0!==e.length);var t}));n.filter((e=>Ie(e))).forEach((e=>{const t=e.attachedToRef,n=t.attachers||[];n.push(e),t.attachers=n}));const s=[...r],o=new Set;if(r.forEach((e=>{t.add(e),o.add(e)})),this.handleGrid(t,o,s),t.getElementsTotal()!=i.length){const e=t.getAllElements(),n=i.filter((t=>!e.includes(t)&&!Ie(t)));n.length>1&&(s.push(n[0]),t.add(n[0]),o.add(n[0]),this.handleGrid(t,o,s))}return t}generateDi(e,t){const n=this.diFactory,i=this.diagram;var r=n.createDiPlane({id:"BPMNPlane_"+e.id,bpmnElement:e}),s=n.createDiDiagram({id:"BPMNDiagram_"+e.id,plane:r});i.diagrams.unshift(s);const o=r.get("planeElement");t.elementsByPosition().forEach((({element:e,row:i,col:r})=>{const s=this.handle("createElementDi",{element:e,row:i,col:r,layoutGrid:t,diFactory:n}).flat();o.push(...s)})),t.elementsByPosition().forEach((({element:e,row:i,col:r})=>{const s=this.handle("createConnectionDi",{element:e,row:i,col:r,layoutGrid:t,diFactory:n}).flat();o.push(...s)}))}handleGrid(e,t,n){for(;n.length>0;){const i=n.pop();je(i,"bpmn:SubProcess")&&this.handlePlane(i);this.handle("addToGrid",{element:i,grid:e,visited:t,stack:n}).flat().forEach((e=>{n.push(e),t.add(e)}))}}getProcess(){return this.diagram.get("rootElements").find((e=>"bpmn:Process"===e.$type))}}var We,Xe,Qe=Object.freeze({__proto__:null,layoutProcess:function(e){return(new Ke).layoutProcess(e)}});function Ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Je(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}function Ye(){return Xe?We:(Xe=1,We=function e(t,n){const i=n.enter,r=n.leave,s=i&&i(t),o=t.$descriptor;if(!1!==s&&!o.isGeneric){o.properties.filter((e=>!e.isAttr&&!e.isReference&&"String"!==e.type)).forEach((i=>{if(i.name in t){const r=t[i.name];i.isMany?r.forEach((t=>{e(t,n)})):e(r,n)}}))}r&&r(t)})}var et,tt,nt,it,rt,st,ot,at={};function pt(){if(et)return at;et=1;const e=Object.prototype.toString,t=Object.prototype.hasOwnProperty;function n(e){return void 0===e}function i(e){return void 0!==e}function r(e){return null==e}function s(t){return"[object Array]"===e.call(t)}function o(t){return"[object Object]"===e.call(t)}function a(t){const n=e.call(t);return"[object Function]"===n||"[object AsyncFunction]"===n||"[object GeneratorFunction]"===n||"[object AsyncGeneratorFunction]"===n||"[object Proxy]"===n}function p(e){if(!s(e))throw new Error("must supply array")}function l(e,n){return!r(e)&&t.call(e,n)}function c(e,t){const n=E(t);let i;return u(e,(function(e,t){if(n(e,t))return i=e,!1})),i}function u(e,t){let i,r;if(n(e))return;const o=s(e)?A:w;for(let n in e)if(l(e,n)&&(i=e[n],r=t(i,o(n)),!1===r))return i}function m(e,t,n){return u(e,(function(e,i){n=t(n,e,i)})),n}function f(e,t){return!!m(e,(function(e,n,i){return e&&t(n,i)}),!0)}function d(e,t){let n=[];return u(e,(function(e,i){n.push(t(e,i))})),n}function y(e){return e&&Object.keys(e)||[]}function h(e,t,n={}){return t=v(t),u(e,(function(e){let i=t(e)||"_",r=n[i];r||(r=n[i]=[]),r.push(e)})),n}function g(e,...t){e=v(e);let n={};return u(t,(t=>h(t,e,n))),d(n,(function(e,t){return e[0]}))}const b=g;function v(e){return a(e)?e:t=>t[e]}function E(e){return a(e)?e:t=>t===e}function w(e){return e}function A(e){return Number(e)}return at.assign=function(e,...t){return Object.assign(e,...t)},at.bind=function(e,t){return e.bind(t)},at.debounce=function(e,t){let n,i,r,s;function o(n){let o=Date.now(),l=n?0:s+t-o;if(l>0)return a(l);e.apply(r,i),p()}function a(e){n=setTimeout(o,e)}function p(){n&&clearTimeout(n),n=s=i=r=void 0}function l(...e){s=Date.now(),i=e,r=this,n||a(t)}return l.flush=function(){n&&o(!0),p()},l.cancel=p,l},at.ensureArray=p,at.every=f,at.filter=function(e,t){const n=E(t);let i=[];return u(e,(function(e,t){n(e,t)&&i.push(e)})),i},at.find=c,at.findIndex=function(e,t){const n=E(t);let i=s(e)?-1:void 0;return u(e,(function(e,t){if(n(e,t))return i=t,!1})),i},at.flatten=function(e){return Array.prototype.concat.apply([],e)},at.forEach=u,at.get=function(e,t,i){let s=e;return u(t,(function(e){if(r(s))return s=void 0,!1;s=s[e]})),n(s)?i:s},at.groupBy=h,at.has=l,at.isArray=s,at.isDefined=i,at.isFunction=a,at.isNil=r,at.isNumber=function(t){return"[object Number]"===e.call(t)},at.isObject=o,at.isString=function(t){return"[object String]"===e.call(t)},at.isUndefined=n,at.keys=y,at.map=d,at.matchPattern=function(e){return function(t){return f(e,(function(e,n){return t[n]===e}))}},at.merge=function e(t,...n){return n.length?(u(n,(function(n){n&&o(n)&&u(n,(function(n,i){if("__proto__"===i)return;let r=t[i];o(n)?(o(r)||(r={}),t[i]=e(r,n)):t[i]=n}))})),t):t},at.omit=function(e,t){let n={};return u(Object(e),(function(e,i){-1===t.indexOf(i)&&(n[i]=e)})),n},at.pick=function(e,t){let n={},i=Object(e);return u(t,(function(t){t in i&&(n[t]=e[t])})),n},at.reduce=m,at.set=function(e,t,s){let o=e;return u(t,(function(e,a){if("number"!=typeof e&&"string"!=typeof e)throw new Error("illegal key type: "+typeof e+". Key should be of type number or string.");if("constructor"===e)throw new Error("illegal key: constructor");if("__proto__"===e)throw new Error("illegal key: __proto__");let p=t[a+1],l=o[e];i(p)&&r(l)&&(l=o[e]=isNaN(+p)?{}:[]),n(p)?n(s)?delete o[e]:o[e]=s:o=l})),e},at.size=function(e){return y(e).length},at.some=function(e,t){return!!c(e,t)},at.sortBy=function(e,t){t=v(t);let n=[];return u(e,(function(e,i){let r=t(e,i),s={d:r,v:e};for(var o=0;o<n.length;o++){let{d:e}=n[o];if(r<e)return void n.splice(o,0,s)}n.push(s)})),d(n,(e=>e.v))},at.throttle=function(e,t){let n=!1;return function(...i){n||(e(...i),n=!0,setTimeout((()=>{n=!1}),t))}},at.unionBy=b,at.uniqueBy=g,at.values=function(e){return d(e,(e=>e))},at.without=function(e,t){if(n(e))return[];p(e);const i=E(t);return e.filter((function(e,t){return!i(e,t)}))},at}function lt(){if(nt)return tt;nt=1;const e=Ye(),{isArray:t,isObject:n,isFunction:i}=pt();class r{constructor({moddleRoot:e,rule:t}){this.rule=t,this.moddleRoot=e,this.messages=[],this.report=this.report.bind(this)}report(e,i,r){let s={id:e,message:i};r&&t(r)&&(s={...s,path:r}),r&&n(r)&&(s={...s,...r}),this.messages.push(s)}}return tt=function({moddleRoot:t,rule:n}){const s=new r({rule:n,moddleRoot:t}),o=n.check||{},a="leave"in o?o.leave:void 0,p="enter"in o?o.enter:i(o)?o:void 0;if(!p&&!a)throw new Error("no check implemented");return e(t,{enter:p?e=>p(e,s):void 0,leave:a?e=>a(e,s):void 0}),s.messages}}var ct,ut,mt,ft=function(){if(ot)return st;ot=1;const e=function(){if(rt)return it;rt=1;const e=lt(),t=(e,t)=>e,n={0:"off",1:"warn",2:"error",3:"info"};function i(e){const{config:n={},resolver:i,transformRule:r=t}=e||{};if(void 0===i)throw new Error("must provide <options.resolver>");this.config=n,this.resolver=i,this.transformRule=r,this.cachedRules={},this.cachedConfigs={}}function r(e){return"bpmnlint"===e?"bpmnlint":e.startsWith("bpmnlint-plugin-")?e:`bpmnlint-plugin-${e}`}return it=i,i.prototype.applyRule=function(t,n){const{config:i,rule:r,category:s,name:o}=n;try{return e({moddleRoot:t,rule:r,config:i}).map((function(e){return{...e,meta:r.meta,category:s}}))}catch(e){return console.error("rule <"+o+"> failed with error: ",e),[{message:e.message,category:"rule-error"}]}},i.prototype.resolveRule=function(e,t){const{pkg:n,ruleName:i}=this.parseRuleName(e),r=`${n}-${i}`,s=this.cachedRules[r];return s?Promise.resolve(s):Promise.resolve(this.resolver.resolveRule(n,i)).then((s=>{if(!s)throw new Error(`unknown rule <${e}>`);return this.cachedRules[r]=this.transformRule(s(t),{pkg:n,ruleName:i})}))},i.prototype.resolveConfig=function(e){const{pkg:t,configName:n}=this.parseConfigName(e),i=`${t}-${n}`,r=this.cachedConfigs[i];return r?Promise.resolve(r):Promise.resolve(this.resolver.resolveConfig(t,n)).then((n=>{if(!n)throw new Error(`unknown config <${e}>`);return this.cachedConfigs[i]=this.normalizeConfig(n,t)}))},i.prototype.resolveRules=function(e){return this.resolveConfiguredRules(e).then((e=>{const t=Object.entries(e).map((([e,t])=>{const{category:n,config:i}=this.parseRuleValue(t);return{name:e,category:n,config:i}})),n=t.filter((e=>"off"!==e.category)).map((e=>{const{name:t,config:n}=e;return this.resolveRule(t,n).then((function(t){return{...e,rule:t}}))}));return Promise.all(n)}))},i.prototype.resolveConfiguredRules=function(e){let t=e.extends;return"string"==typeof t&&(t=[t]),void 0===t&&(t=[]),Promise.all(t.map((e=>this.resolveConfig(e).then((e=>this.resolveConfiguredRules(e)))))).then((t=>[...t,this.normalizeConfig(e,"bpmnlint").rules].reduce(((e,t)=>({...e,...t})),{})))},i.prototype.lint=function(e,t){return t=t||this.config,this.resolveRules(t).then((t=>{const n={};return t.forEach((t=>{const{name:i}=t,r=this.applyRule(e,t);r.length&&(n[i]=r)})),n}))},i.prototype.parseRuleValue=function(e){let t,i;return Array.isArray(e)?(t=e[0],i=e[1]):(t=e,i={}),"string"==typeof t&&(t=t.toLowerCase()),t=n[t]||t,{config:i,category:t}},i.prototype.parseRuleName=function(e,t="bpmnlint"){const n=/^(?:(?:(@[^/]+)\/)?([^@]{1}[^/]*)\/)?([^/]+)$/.exec(e);if(!n)throw new Error(`unparseable rule name <${e}>`);const[i,s,o,a]=n;return o?{pkg:`${s?s+"/":""}${r(o)}`,ruleName:a}:{pkg:t,ruleName:a}},i.prototype.parseConfigName=function(e){const t=/^(?:(?:plugin:(?:(@[^/]+)\/)?([^@]{1}[^/]*)\/)|bpmnlint:)([^/]+)$/.exec(e);if(!t)throw new Error(`unparseable config name <${e}>`);const[n,i,s,o]=t;return s?{pkg:`${i?i+"/":""}${r(s)}`,configName:o}:{pkg:"bpmnlint",configName:o}},i.prototype.getSimplePackageName=function(e){const t=/^(?:(@[^/]+)\/)?([^/]+)$/.exec(e);if(!t)throw new Error(`unparseable package name <${e}>`);const[n,i,r]=t;return`${i?i+"/":""}${s=r,s.startsWith("bpmnlint-plugin-")?s.substring(16):s}`;var s},i.prototype.normalizeConfig=function(e,t){const n=e.rules||{},i=Object.keys(n).reduce(((e,i)=>{const r=n[i],{pkg:s,ruleName:o}=this.parseRuleName(i,t);return e["bpmnlint"===s?o:`${this.getSimplePackageName(s)}/${o}`]=r,e}),{});return{...e,rules:i}},it}();return st={Linter:e}}(),dt={};function yt(){ct=window.addEventListener?"addEventListener":"attachEvent",ut=window.removeEventListener?"removeEventListener":"detachEvent",mt="addEventListener"!==ct?"on":""}dt.bind=function(e,t,n,i){return ct||yt(),e[ct](mt+t,n,i||!1),n},dt.unbind=function(e,t,n,i){return ut||yt(),e[ut](mt+t,n,i||!1),n};var ht,gt=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){return(r=t.createElement("html")).innerHTML=e,r.removeChild(r.lastChild)}var r,s=Object.prototype.hasOwnProperty.call(vt,i)?vt[i]:vt._default,o=s[0],a=s[1],p=s[2];(r=t.createElement("div")).innerHTML=a+e+p;for(;o--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var l=t.createDocumentFragment();for(;r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l},bt=!1;"undefined"!=typeof document&&((ht=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',bt=!ht.getElementsByTagName("link").length,ht=void 0);var vt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:bt?[1,"X<div>","</div>"]:[0,"",""]};vt.td=vt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],vt.option=vt.optgroup=[1,'<select multiple="multiple">',"</select>"],vt.thead=vt.tbody=vt.colgroup=vt.caption=vt.tfoot=[1,"<table>","</table>"],vt.polyline=vt.ellipse=vt.polygon=vt.circle=vt.text=vt.line=vt.path=vt.rect=vt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Et=gt,wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function At(e){return(e=""+e)&&e.replace(/[&<>"']/g,(function(e){return wt[e]}))}function Rt(e,t){var n=function(e){return e&&e.businessObject||e}(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function xt(e,t){var n=e.get("editorActions",!1);n&&n.register({toggleLinting:function(){t.toggle()}})}xt.$inject=["injector","linting"];var Ct='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   version="1.1"\n   viewBox="0 0 512 512"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg">\n  <path\n     d="M 339.07183,256.00001 463.66713,131.4047 c 15.28961,-15.2896 15.28961,-40.079175 0,-55.381227 l -27.6906,-27.690611 c -15.28961,-15.289602 -40.07917,-15.289602 -55.38123,0 L 256,172.92818 131.4047,48.332862 c -15.2896,-15.289602 -40.079177,-15.289602 -55.381228,0 L 48.332861,76.023473 c -15.2896,15.2896 -15.2896,40.079177 0,55.381227 L 172.92815,256.00001 48.332861,380.59531 c -15.2896,15.2896 -15.2896,40.07917 0,55.38123 l 27.690611,27.69061 c 15.289601,15.28959 40.091628,15.28959 55.381228,0 L 256,339.07184 380.5953,463.66715 c 15.2896,15.28959 40.09162,15.28959 55.38123,0 l 27.6906,-27.69061 c 15.28961,-15.2896 15.28961,-40.07918 0,-55.38123 z"\n     fill="currentColor" />\n</svg>\n',Pt='<svg version="1.1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">\n  <path d="m256 323.95c-45.518 0-82.419 34.576-82.419 77.229 0 42.652 36.9 77.229 82.419 77.229 45.518 0 82.419-34.577 82.419-77.23 0-42.652-36.9-77.229-82.419-77.229zm-80.561-271.8 11.61 204.35c.544 9.334 8.78 16.64 18.755 16.64h100.39c9.975 0 18.211-7.306 18.754-16.64l11.611-204.35c.587-10.082-7.98-18.56-18.754-18.56h-123.62c-10.775 0-19.34 8.478-18.753 18.56z" fill="currentColor"/>\n</svg>\n',St='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   viewBox="0 0 512 512"\n   version="1.1"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg">\n  <path\n     fill="currentColor"\n     d="m 173.898,439.40356 -166.4,-166.4 c -9.997,-9.997 -9.997,-26.206 0,-36.204 l 36.203,-36.204 c 9.997,-9.998 26.207,-9.998 36.204,0 L 192,312.68956 432.095,72.595562 c 9.997,-9.997 26.207,-9.997 36.204,0 l 36.203,36.203998 c 9.997,9.997 9.997,26.206 0,36.204 l -294.4,294.401 c -9.998,9.997 -26.207,9.997 -36.204,-10e-4 z" />\n</svg>\n',Mt='<svg\n  viewBox="3.5 3.5 9 9"\n  version="1.1"\n  xmlns="http://www.w3.org/2000/svg">\n  <path\n    fill="currentColor" d="M6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path>\n</svg>',Dt={resolver:{resolveRule:function(){return null}},config:{}},Nt={error:Ct,warning:Pt,success:St,info:Mt,inactive:St};function Bt(e,t,n,i,r,s,o){this._bpmnjs=e,this._canvas=t,this._elementRegistry=i,this._eventBus=r,this._overlays=s,this._translate=o,this._issues={},this._active=n&&n.active||!1,this._linterConfig=Dt,this._overlayIds={};var a=this;r.on(["import.done","elements.changed","linting.configChanged","linting.toggle"],500,(function(e){a.update()})),r.on("linting.toggle",(function(e){e.active||(a._clearIssues(),a._updateButton())})),r.on("diagram.clear",(function(){a._clearIssues()}));var p=n&&n.bpmnlint;p&&r.once("diagram.init",(function(){if(a.getLinterConfig()===Dt)try{a.setLinterConfig(p)}catch(e){console.error("[bpmn-js-bpmnlint] Invalid lint rules configured. Please doublecheck your linting.bpmnlint configuration, cf. https://github.com/bpmn-io/bpmn-js-bpmnlint#configure-lint-rules")}})),this._init()}Bt.prototype.setLinterConfig=function(e){if(!e.config||!e.resolver)throw new Error("Expected linterConfig = { config, resolver }");this._linterConfig=e,this._eventBus.fire("linting.configChanged")},Bt.prototype.getLinterConfig=function(){return this._linterConfig},Bt.prototype._init=function(){this._createButton(),this._updateButton()},Bt.prototype.isActive=function(){return this._active},Bt.prototype._formatIssues=function(e){let t=this,n=(i=function(e,t,n){return e.concat(t.map((function(e){return e.rule=n,e})))},r=[],c(e,(function(e,t){r=i(r,e,t)})),r);var i,r;const s=t._elementRegistry.filter((e=>Rt(e,"bpmn:Participant"))).map((e=>e.businessObject));return n=u(n,(function(e){if(!t._elementRegistry.get(e.id)){e.isChildIssue=!0,e.actualElementId=e.id;const n=s.filter((t=>t.processRef&&t.processRef.id&&t.processRef.id===e.id));n.length?e.id=n[0].id:e.id=t._canvas.getRootElement().id}return e})),n=m(n,(function(e){return e.id})),n},Bt.prototype.toggle=function(e){return e=void 0===e?!this.isActive():e,this._setActive(e),e},Bt.prototype._setActive=function(e){this._active!==e&&(this._active=e,this._eventBus.fire("linting.toggle",{active:e}))},Bt.prototype.update=function(){var e=this;if(this._bpmnjs.getDefinitions()){var t=this._lintStart=Math.random();this.lint().then((function(n){if(e._lintStart===t){n=e._formatIssues(n);var i={},r={},s={};for(var o in e._issues)n[o]||(i[o]=e._issues[o]);for(var a in n)e._issues[a]?n[a]!==e._issues[a]&&(r[a]=n[a]):s[a]=n[a];i=g(i,r),s=g(s,r),e._clearOverlays(),e.isActive()&&e._createIssues(s),e._issues=n,e._updateButton(),e._fireComplete(n)}}))}},Bt.prototype._fireComplete=function(e){this._eventBus.fire("linting.completed",{issues:e})},Bt.prototype._createIssues=function(e){for(var t in e)this._createElementIssues(t,e[t])},Bt.prototype._createElementIssues=function(e,t){var n=this._elementRegistry.get(e);if(n){var i,r,s=this._elementRegistry.get(e+"_plane");s&&this._createElementIssues(s.id,t);var o=!n.parent;o&&Rt(n,"bpmn:Process")?(i="bottom-right",r={top:20,left:150}):o&&Rt(n,"bpmn:SubProcess")?(i="bottom-right",r={top:50,left:150}):(i="top-right",r={top:-7,left:-7});var a=m(t,(function(e){return(e.isChildIssue?"child":"")+e.category})),p=a.error,l=a.warn,c=a.info,u=a.childerror,f=a.childwarn,d=a.childinfo;if(c||p||l||u||f||d){var y=Et('<div class="bjsl-overlay bjsl-issues-'+i+'"></div>'),h=Et(p||u?'<div class="bjsl-icon bjsl-icon-error">'+Ct+"</div>":l||f?'<div class="bjsl-icon bjsl-icon-warning">'+Pt+"</div>":'<div class="bjsl-icon bjsl-icon-info">'+Mt+"</div>"),g=Et('<div class="bjsl-dropdown"></div>'),b=Et('<div class="bjsl-dropdown-content"></div>'),v=Et('<div class="bjsl-issues"></div>'),E=Et('<div class="bjsl-current-element-issues"></div>'),w=Et("<ul></ul>");if(y.appendChild(h),y.appendChild(g),g.appendChild(b),b.appendChild(v),v.appendChild(E),E.appendChild(w),p&&this._addErrors(w,p),l&&this._addWarnings(w,l),c&&this._addInfos(w,c),u||f||d){var A=Et('<div class="bjsl-child-issues"></div>'),R=Et("<ul></ul>"),x=this._translate("Issues for child elements"),C=Et('<a class="bjsl-issue-heading">'+x+":</a>");if(u&&this._addErrors(R,u),f&&this._addWarnings(R,f),d&&this._addInfos(R,d),p||l){var P=Et("<hr/>");A.appendChild(P)}A.appendChild(C),A.appendChild(R),v.appendChild(A)}this._overlayIds[e]=this._overlays.add(n,"linting",{position:r,html:y,scale:{min:.7}})}}},Bt.prototype._addErrors=function(e,t){var n=this;t.forEach((function(t){n._addEntry(e,"error",t)}))},Bt.prototype._addWarnings=function(e,t){var n=this;t.forEach((function(t){n._addEntry(e,"warning",t)}))},Bt.prototype._addInfos=function(e,t){var n=this;t.forEach((function(t){n._addEntry(e,"info",t)}))},Bt.prototype._addEntry=function(e,t,n){var i=n.rule,r=n.meta?.documentation.url,s=this._translate(n.message),o=n.actualElementId,a=Nt[t],p=Et(`\n    <li class="${t}" data-rule="${At(i)}">\n      <span class="icon">${a}</span>\n      <span class="message">${At(s)}</span>\n      <span class="rule">(${r?`<a href="${At(r)}" target="_blank">${At(i)}</a>`:At(i)})</span>\n      ${o?`<span class="bjsl-id-hint"><code>${At(o)}</code></span>`:""}\n    </li>\n  `);e.appendChild(p)},Bt.prototype._clearOverlays=function(){this._overlays.remove({type:"linting"}),this._overlayIds={}},Bt.prototype._clearIssues=function(){this._issues={},this._clearOverlays()},Bt.prototype._setButtonState=function(e){var{errors:t,warnings:n,infos:i}=e,r=this._button,s=(t?"error":n&&"warning")||"success",o=`\n    <span class="icon">${Nt[s]}</span>\n    <span>${this._translate(t||n?"{errors} Errors, {warnings} Warnings":"No Issues",{errors:String(t),warnings:String(n),infos:String(i)})}</span>`;s=this.isActive()?s:"inactive",["error","inactive","success","warning"].forEach((function(e){s===e?r.classList.add("bjsl-button-"+e):r.classList.remove("bjsl-button-"+e)})),r.innerHTML=o},Bt.prototype._updateButton=function(){var e=0,t=0,n=0;for(var i in this._issues)this._issues[i].forEach((function(i){"error"===i.category?e++:"warn"===i.category?t++:"info"===i.category&&n++}));this._setButtonState({errors:e,warnings:t,infos:n})},Bt.prototype._createButton=function(){var e=this;this._button=Et('<button class="bjsl-button bjsl-button-inactive" title="'+this._translate("Toggle linting overlays")+'"></button>'),this._button.addEventListener("click",(function(){e.toggle()})),this._canvas.getContainer().appendChild(this._button)},Bt.prototype.lint=function(){var e=this._bpmnjs.getDefinitions();return new ft.Linter(this._linterConfig).lint(e)},Bt.$inject=["bpmnjs","canvas","config.linting","elementRegistry","eventBus","overlays","translate"];var kt={__init__:["linting","lintingEditorActions"],linting:["type",Bt],lintingEditorActions:["type",xt]};function It(e,t){return-1===t.indexOf(":")&&(t="bpmn:"+t),"function"==typeof e.$instanceOf?e.$instanceOf(t):e.$type===t}var _t,Tt,Ot,jt=Object.freeze({__proto__:null,is:It,isAny:function(e,t){return t.some((function(t){return It(e,t)}))}}),$t=Je(jt),Lt={};function Ft(){if(_t)return Lt;_t=1;const{is:e}=$t;Lt.checkDiscouragedNodeType=function(t,i){return function(){return n(i,{check:function(n,i){e(n,t)&&i.report(n.id,"Element type <"+t+"> is discouraged")}})}},Lt.findParent=function t(n,i){if(!n)return null;const r=n.$parent;return r?e(r,i)?r:t(r,i):n};const t="https://github.com/bpmn-io/bpmnlint/blob/main/docs/rules";function n(e,n){const{meta:{documentation:i={},...r}={},...s}=n;return{meta:{documentation:{url:`${t}/${e}.md`,...i},...r},...s}}return Lt.annotateRule=n,Lt}var Gt,zt,Vt=function(){if(Ot)return Tt;Ot=1;const{is:e}=$t,{annotateRule:t}=Ft();return Tt=function(){return t("ad-hoc-sub-process",{check:function(t,n){if(!e(t,"bpmn:AdHocSubProcess"))return;(t.flowElements||[]).forEach((function(t){e(t,"bpmn:StartEvent")&&n.report(t.id,"A <Start Event> is not allowed in <Ad Hoc Sub Process>"),e(t,"bpmn:EndEvent")&&n.report(t.id,"An <End Event> is not allowed in <Ad Hoc Sub Process>"),e(t,"bpmn:IntermediateCatchEvent")&&(t.outgoing&&0!==t.outgoing.length||n.report(t.id,"An intermediate catch event inside <Ad Hoc Sub Process> must have an outgoing sequence flow"))}))}})}}(),qt=Ze(Vt);var Ut,Ht,Kt=Ze(function(){if(zt)return Gt;zt=1;const{annotateRule:e}=Ft();function t(e){return!!e.conditionExpression}return Gt=function(){return e("conditional-flows",{check:function(e,n){if(!function(e){const n=e.default,i=e.outgoing||[];return n||i.find(t)}(e))return;(e.outgoing||[]).forEach((i=>{const r=!t(i)&&!function(e,t){return e.default===t}(e,i);r&&n.report(i.id,"Sequence flow is missing condition",["conditionExpression"])}))}})}}());var Wt,Xt,Qt=function(){if(Ht)return Ut;Ht=1;const{is:e,isAny:t}=$t,{annotateRule:n}=Ft();return Ut=function(){return n("end-event-required",{check:function(n,i){if(t(n,["bpmn:Process","bpmn:SubProcess"])&&!e(n,"bpmn:AdHocSubProcess")&&!function(t){return(t.flowElements||[]).some((t=>e(t,"bpmn:EndEvent")))}(n)){const t=e(n,"bpmn:SubProcess")?"Sub process":"Process";i.report(n.id,t+" is missing end event")}}})}}(),Zt=Ze(Qt);var Jt,Yt,en=function(){if(Xt)return Wt;Xt=1;const{is:e}=$t,{annotateRule:t}=Ft();return Wt=function(){return t("event-sub-process-typed-start-event",{check:function(t,n){if(!e(t,"bpmn:SubProcess")||!t.triggeredByEvent)return;(t.flowElements||[]).forEach((function(t){if(!e(t,"bpmn:StartEvent"))return!1;0===(t.eventDefinitions||[]).length&&n.report(t.id,"Start event is missing event definition",["eventDefinitions"])}))}})}}(),tn=Ze(en);var nn,rn,sn=function(){if(Yt)return Jt;Yt=1;const{isAny:e}=$t,{annotateRule:t}=Ft();return Jt=function(){return t("fake-join",{check:function(t,n){if(!e(t,["bpmn:Activity","bpmn:Event"]))return;(t.incoming||[]).length>1&&n.report(t.id,"Incoming flows do not join")}})}}(),on=Ze(sn);var an,pn,ln=function(){if(rn)return nn;rn=1;const{is:e,isAny:t}=$t,{annotateRule:n}=Ft();return nn=function(){return n("global",{check:function(n,i){if(!e(n,"bpmn:Definitions"))return!1;const r=n.rootElements.filter((e=>t(e,["bpmn:Error","bpmn:Escalation","bpmn:Message","bpmn:Signal"]))),s=function(n){const i=[];function r(n){e(n,"bpmn:Definitions")&&n.get("rootElements").length&&n.get("rootElements").forEach(r),e(n,"bpmn:FlowElementsContainer")&&n.get("flowElements").length&&n.get("flowElements").forEach(r),e(n,"bpmn:Event")&&n.get("eventDefinitions").length&&n.get("eventDefinitions").forEach((e=>i.push(e))),e(n,"bpmn:Collaboration")&&n.get("messageFlows").length&&n.get("messageFlows").forEach(r),t(n,["bpmn:MessageFlow","bpmn:ReceiveTask","bpmn:SendTask"])&&i.push(n)}return r(n),i}(n);r.forEach((n=>{var o;o=n,""===o.name?.trim()&&i.report(n.id,"Element is missing name"),function(n,i){if(e(n,"bpmn:Error"))return i.some((t=>e(t,"bpmn:ErrorEventDefinition")&&n.get("id")===t.get("errorRef")?.get("id")));if(e(n,"bpmn:Escalation"))return i.some((t=>e(t,"bpmn:EscalationEventDefinition")&&n.get("id")===t.get("escalationRef")?.get("id")));if(e(n,"bpmn:Message"))return i.some((e=>t(e,["bpmn:MessageEventDefinition","bpmn:MessageFlow","bpmn:ReceiveTask","bpmn:SendTask"])&&n.get("id")===e.get("messageRef")?.get("id")));if(e(n,"bpmn:Signal"))return i.some((t=>e(t,"bpmn:SignalEventDefinition")&&n.get("id")===t.get("signalRef")?.get("id")))}(n,s)||i.report(n.id,"Element is unused"),function(t,n){return 1===n.filter((n=>e(n,t.$type)&&t.name===n.name)).length}(n,r)||i.report(n.id,"Element name is not unique")}))}})},nn}(),cn=Ze(ln);var un,mn,fn=function(){if(pn)return an;pn=1;const{is:e,isAny:t}=$t,{annotateRule:n}=Ft();return an=function(){return n("label-required",{check:function(n,i){if(!t(n,["bpmn:ParallelGateway","bpmn:EventBasedGateway"])&&(!e(n,"bpmn:Gateway")||function(e){const t=e.outgoing||[];return t.length>1}(n))&&!e(n,"bpmn:SubProcess")&&(!e(n,"bpmn:SequenceFlow")||function(e){return e.conditionExpression}(n))&&t(n,["bpmn:FlowNode","bpmn:SequenceFlow","bpmn:Participant","bpmn:Lane"])){0===(n.name||"").trim().length&&i.report(n.id,"Element is missing label/name",["name"])}}})}}(),dn=Ze(fn);var yn,hn,gn=function(){if(mn)return un;mn=1;const{groupBy:e}=pt(),{is:t}=$t,{annotateRule:n}=Ft();function i(e){var n=e.eventDefinitions||[];return!!t(e,"bpmn:Event")&&n.some((e=>t(e,"bpmn:LinkEventDefinition")))}function r(e){return e.get("eventDefinitions").find((e=>t(e,"bpmn:LinkEventDefinition"))).name}function s(e){return t(e,"bpmn:ThrowEvent")}function o(e){return t(e,"bpmn:CatchEvent")}return un=function(){return n("link-event",{check:function(n,a){if(!t(n,"bpmn:FlowElementsContainer"))return;const p=(n.flowElements||[]).filter(i);for(const e of p)r(e)||a.report(e.id,"Link event is missing link name");const l=e(p,(e=>r(e)));for(const[e,t]of Object.entries(l)){if(!e)continue;if(1===t.length){const n=t[0];a.report(n.id,`Link ${s(n)?"catch":"throw"} event with link name <${e}> missing in scope`);continue}const n=t.filter(o);if(n.length>1)for(const t of n)a.report(t.id,`Duplicate link catch event with link name <${e}> in scope`);else if(0===n.length)for(const n of t)a.report(n.id,`Link catch event with link name <${e}> missing in scope`)}}})},un}(),bn=Ze(gn);var vn,En,wn=function(){if(hn)return yn;hn=1;const{is:e}=$t,{flatten:t}=pt(),{annotateRule:n}=Ft();function i(e){return t(e.map((e=>{const n=e.laneSets&&e.laneSets[0]||e.childLaneSet,r=t([e.flowElements||[],e.flowElements&&i(e.flowElements.filter(s))||[],e.participants||[],e.artifacts||[],n&&n.lanes||[],n&&n.lanes&&i(n.lanes.filter(o))||[],e.messageFlows||[]]);return r.length>0?r.map((e=>({id:e.id,$type:e.$type}))):[]})))}function r(e){return!["bpmn:DataObject"].includes(e.$type)}function s(e){return!!e.flowElements}function o(e){return!!e.childLaneSet}return yn=function(){return n("no-bpmndi",{check:function(n,s){if(!e(n,"bpmn:Definitions"))return!1;const o=i(n.rootElements).filter(r),a=t(n.get("diagrams").map((e=>(e.plane.planeElement||[]).map((e=>e.bpmnElement?.id)))));o.forEach((e=>{-1===a.indexOf(e.id)&&s.report(e.id,"Element is missing bpmndi")}))}})}}(),An=Ze(wn);var Rn,xn,Cn=Ze(function(){if(En)return vn;En=1;const e=Ft().checkDiscouragedNodeType;return vn=e("bpmn:ComplexGateway","no-complex-gateway")}());var Pn,Sn,Mn=function(){if(xn)return Rn;xn=1;const{isAny:e,is:t}=$t,{annotateRule:n}=Ft();return Rn=function(){return n("no-disconnected",{check:function(n,i){if(!e(n,["bpmn:Task","bpmn:Gateway","bpmn:SubProcess","bpmn:Event"])||n.triggeredByEvent)return;if(function(e){var n=function(e){var n=e.eventDefinitions;if(!t(e,"bpmn:BoundaryEvent"))return!1;if(!n||1!==n.length)return!1;return t(n[0],"bpmn:CompensateEventDefinition")}(e),i=function(e){return e.isForCompensation}(e);return n||i}(n))return;if(t(n.$parent,"bpmn:AdHocSubProcess"))return;const r=n.incoming||[],s=n.outgoing||[];r.length||s.length||i.report(n.id,"Element is not connected")}})}}(),Dn=Ze(Mn);var Nn,Bn,kn=function(){if(Sn)return Pn;Sn=1;const{is:e}=$t,{annotateRule:t}=Ft();return Pn=function(){const n={},i={},r={};return t("no-duplicate-sequence-flows",{check:function(t,s){if(!e(t,"bpmn:SequenceFlow"))return;const o=function(e){const t=e.conditionExpression,n=t?t.body:"",i=e.sourceRef?e.sourceRef.id:e.id,r=e.targetRef?e.targetRef.id:e.id;return i+"#"+r+"#"+n}(t);if(o in n){s.report(t.id,"SequenceFlow is a duplicate");const e=t.sourceRef.id,n=t.targetRef.id;i[e]||(s.report(e,"Duplicate outgoing sequence flows"),i[e]=!0),r[n]||(s.report(n,"Duplicate incoming sequence flows"),r[n]=!0)}else n[o]=t}})}}(),In=Ze(kn);var _n,Tn,On=function(){if(Bn)return Nn;Bn=1;const{is:e}=$t,{annotateRule:t}=Ft();return Nn=function(){return t("no-gateway-fork-join",{check:function(t,n){if(!e(t,"bpmn:Gateway"))return;const i=t.incoming||[],r=t.outgoing||[];i.length>1&&r.length>1&&n.report(t.id,"Gateway forks and joins")}})}}(),jn=Ze(On);var $n,Ln,Fn=function(){if(Tn)return _n;Tn=1;const{isAny:e}=$t,{annotateRule:t}=Ft();return _n=function(){return t("no-implicit-split",{check:function(t,n){if(!e(t,["bpmn:Activity","bpmn:Event"]))return;(t.outgoing||[]).filter((e=>!function(e){return!!e.conditionExpression}(e)&&!function(e,t){return e.default===t}(t,e))).length>1&&n.report(t.id,"Flow splits implicitly")}})}}(),Gn=Ze(Fn);var zn,Vn,qn=function(){if(Ln)return $n;Ln=1;const{is:e,isAny:t}=$t,{findParent:n,annotateRule:i}=Ft();return $n=function(){function r(t){const i=t.outgoing||[];return(!e(t,"bpmn:SubProcess")||!t.triggeredByEvent)&&((!e(t,"bpmn:IntermediateThrowEvent")||!function(t){const n=t.eventDefinitions||[];return n.length&&n.every((t=>e(t,"bpmn:LinkEventDefinition")))}(t))&&(!e(t.$parent,"bpmn:AdHocSubProcess")&&(!e(t,"bpmn:EndEvent")&&(!(e(t,"bpmn:BoundaryEvent")&&function(t){const n=t.eventDefinitions||[];return n.length&&n.every((t=>e(t,"bpmn:CompensateEventDefinition")))}(t)&&function(t){return(n(t,"bpmn:Process").artifacts||[]).some((n=>!!e(n,"bpmn:Association")&&n.sourceRef.id===t.id))}(t))&&((!e(t,"bpmn:Task")||!function(e){return e.isForCompensation}(t))&&0===i.length)))))}return i("no-implicit-end",{check:function(e,n){t(e,["bpmn:Event","bpmn:Activity","bpmn:Gateway"])&&r(e)&&n.report(e.id,"Element is an implicit end")}})}}(),Un=Ze(qn);var Hn,Kn,Wn=function(){if(Vn)return zn;Vn=1;const{is:e,isAny:t}=$t,{annotateRule:n}=Ft();return zn=function(){function i(n){const i=n.incoming||[];return(!e(n,"bpmn:Activity")||!n.isForCompensation)&&(!e(n.$parent,"bpmn:AdHocSubProcess")&&((!e(n,"bpmn:SubProcess")||!n.triggeredByEvent)&&((!e(n,"bpmn:IntermediateCatchEvent")||!function(t){const n=t.eventDefinitions||[];return n.length&&n.every((t=>e(t,"bpmn:LinkEventDefinition")))}(n))&&(!t(n,["bpmn:StartEvent","bpmn:BoundaryEvent"])&&0===i.length))))}return n("no-implicit-start",{check:function(e,n){t(e,["bpmn:Event","bpmn:Activity","bpmn:Gateway"])&&i(e)&&n.report(e.id,"Element is an implicit start")}})}}(),Xn=Ze(Wn);var Qn,Zn,Jn=Ze(function(){if(Kn)return Hn;Kn=1;const e=Ft().checkDiscouragedNodeType;return Hn=e("bpmn:InclusiveGateway","no-inclusive-gateway")}());var Yn,ei,ti=function(){if(Zn)return Qn;Zn=1;const{is:e}=$t,{annotateRule:t}=Ft();function n(t,r,o,a,p){const l=t.flowElements||[],c=l.filter((e=>a.has(e)));i(c,r,a),c.forEach((t=>{!e(t,"bpmn:DataStoreReference")&&function(e,t){if(!s(e)||!s(t))return!1;const n=e.x>=t.x&&e.y>=t.y,i=e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height;return!(n&&i)}(a.get(t).bounds,p.bounds)&&o.add(t)}));l.filter((t=>e(t,"bpmn:SubProcess"))).forEach((e=>{const t=a.get(e)||{},i=t.isExpanded?t:{};n(e,r,o,a,i)}))}function i(e,t,n){for(let i=0;i<e.length-1;i++){const s=e[i];for(let o=i+1;o<e.length;o++){const i=e[o];if(s.attachedToRef===i||i.attachedToRef===s)continue;const a=n.get(s)?.bounds,p=n.get(i)?.bounds;a&&p&&(r(a,p)&&(t.add(s),t.add(i)))}}}function r(e,t){if(!s(e)||!s(t))return!1;const n=e.x+e.width>=t.x&&t.x+t.width>=e.x,i=e.y+e.height>=t.y&&t.y+t.height>=e.y;return n&&i}function s(t){return!!t&&e(t,"dc:Bounds")&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}return Qn=function(){return t("no-overlapping-elements",{check:function(t,r){if(!e(t,"bpmn:Definitions"))return;const s=t.rootElements||[],o=new Set,a=new Set,p=function(e){const t=new Map,n=e.diagrams||[];return n.filter((e=>!!e.plane)).forEach((e=>{(e.plane.planeElement||[]).filter((e=>!!e.bpmnElement)).forEach((e=>{t.set(e.bpmnElement,e)}))})),t}(t),l=new Map;s.filter((t=>e(t,"bpmn:Collaboration"))).forEach((e=>{const t=e.participants||[];i(t,o,p),t.forEach((e=>{l.set(e.processRef,p.get(e))}))})),s.filter((t=>e(t,"bpmn:Process"))).forEach((e=>{const t=l.get(e)||{};n(e,o,a,p,t)})),o.forEach((e=>r.report(e.id,"Element overlaps with other element"))),a.forEach((e=>r.report(e.id,"Element is outside of parent boundary")))}})}}(),ni=Ze(ti);var ii,ri,si=function(){if(ei)return Yn;ei=1;const{is:e}=$t,{annotateRule:t}=Ft();return Yn=function(){return t("single-blank-start-event",{check:function(t,n){if(!e(t,"bpmn:FlowElementsContainer"))return;if((t.flowElements||[]).filter((function(t){if(!e(t,"bpmn:StartEvent"))return!1;return 0===(t.eventDefinitions||[]).length})).length>1){const i=e(t,"bpmn:SubProcess")?"Sub process":"Process";n.report(t.id,i+" has multiple blank start events")}}})}}(),oi=Ze(si);var ai,pi,li=function(){if(ri)return ii;ri=1;const{is:e}=$t,{annotateRule:t}=Ft();return ii=function(){return t("single-event-definition",{check:function(t,n){if(!e(t,"bpmn:Event"))return;(t.eventDefinitions||[]).length>1&&n.report(t.id,"Event has multiple event definitions",["eventDefinitions"])}})}}(),ci=Ze(li);var ui,mi,fi=function(){if(pi)return ai;pi=1;const{is:e,isAny:t}=$t,{annotateRule:n}=Ft();return ai=function(){return n("start-event-required",{check:function(n,i){if(t(n,["bpmn:Process","bpmn:SubProcess"])&&!e(n,"bpmn:AdHocSubProcess")&&!function(t){return(t.flowElements||[]).some((t=>e(t,"bpmn:StartEvent")))}(n)){const t=e(n,"bpmn:SubProcess")?"Sub process":"Process";i.report(n.id,t+" is missing start event")}}})}}(),di=Ze(fi);var yi,hi,gi=function(){if(mi)return ui;mi=1;const{is:e}=$t,{annotateRule:t}=Ft();return ui=function(){return t("sub-process-blank-start-event",{check:function(t,n){if(!e(t,"bpmn:SubProcess")||t.triggeredByEvent)return;(t.flowElements||[]).forEach((function(t){if(!e(t,"bpmn:StartEvent"))return!1;(t.eventDefinitions||[]).length>0&&n.report(t.id,"Start event must be blank",["eventDefinitions"])}))}})}}(),bi=Ze(gi);var vi,Ei,wi=function(){if(hi)return yi;hi=1;const{is:e}=$t,{annotateRule:t}=Ft();return yi=function(){return t("superfluous-gateway",{check:function(t,n){if(!e(t,"bpmn:Gateway"))return;const i=t.incoming||[],r=t.outgoing||[];1===i.length&&1===r.length&&n.report(t.id,"Gateway is superfluous. It only has one source and target.")}})}}(),Ai=Ze(wi);var Ri=function(){if(Ei)return vi;Ei=1;const{is:e,isAny:t}=$t,{annotateRule:n}=Ft();function i(t){return e(t,"bpmn:EndEvent")&&(t.eventDefinitions||[]).some((t=>e(t,"bpmn:TerminateEventDefinition")))}return vi=function(){return n("superfluous-termination",{check:function(n,r){if(!t(n,["bpmn:Process","bpmn:SubProcess"]))return;const s=(n.flowElements||[]).filter((t=>e(t,"bpmn:FlowNode")&&0===(t.outgoing||[]).length)),o=s.filter(i);if(1!==o.length)return;if(s.every((t=>{return e(n=t,"bpmn:SubProcess")&&n.triggeredByEvent&&(n.flowElements||[]).some((t=>e(t,"bpmn:StartEvent")&&t.isInterrupting))||i(t);var n})))for(const e of o)r.report(e.id,"Termination is superfluous.")}})}}(),xi=Ze(Ri);const Ci={};function Pi(){}Pi.prototype.resolveRule=function(e,t){const n=Ci[e+"/"+t];if(!n)throw new Error("cannot resolve rule <"+e+"/"+t+">: not bundled");return n},Pi.prototype.resolveConfig=function(e,t){throw new Error("cannot resolve config <"+t+"> in <"+e+">: not bundled")};const Si={resolver:new Pi,config:{rules:{"ad-hoc-sub-process":"error","conditional-flows":"error","end-event-required":"error","event-sub-process-typed-start-event":"error","fake-join":"warn",global:"warn","label-required":"error","link-event":"error","no-bpmndi":"error","no-complex-gateway":"error","no-disconnected":"error","no-duplicate-sequence-flows":"error","no-gateway-join-fork":"error","no-implicit-split":"error","no-implicit-end":"error","no-implicit-start":"error","no-inclusive-gateway":"error","no-overlapping-elements":"warn","single-blank-start-event":"error","single-event-definition":"error","start-event-required":"error","sub-process-blank-start-event":"error","superfluous-gateway":"warn","superfluous-termination":"warn"}}};Ci["bpmnlint/ad-hoc-sub-process"]=qt,Ci["bpmnlint/conditional-flows"]=Kt,Ci["bpmnlint/end-event-required"]=Zt,Ci["bpmnlint/event-sub-process-typed-start-event"]=tn,Ci["bpmnlint/fake-join"]=on,Ci["bpmnlint/global"]=cn,Ci["bpmnlint/label-required"]=dn,Ci["bpmnlint/link-event"]=bn,Ci["bpmnlint/no-bpmndi"]=An,Ci["bpmnlint/no-complex-gateway"]=Cn,Ci["bpmnlint/no-disconnected"]=Dn,Ci["bpmnlint/no-duplicate-sequence-flows"]=In,Ci["bpmnlint/no-gateway-join-fork"]=jn,Ci["bpmnlint/no-implicit-split"]=Gn,Ci["bpmnlint/no-implicit-end"]=Un,Ci["bpmnlint/no-implicit-start"]=Xn,Ci["bpmnlint/no-inclusive-gateway"]=Jn,Ci["bpmnlint/no-overlapping-elements"]=ni,Ci["bpmnlint/single-blank-start-event"]=oi,Ci["bpmnlint/single-event-definition"]=ci,Ci["bpmnlint/start-event-required"]=di,Ci["bpmnlint/sub-process-blank-start-event"]=bi,Ci["bpmnlint/superfluous-gateway"]=Ai,Ci["bpmnlint/superfluous-termination"]=xi,window.BpmnJsBpmnlint=kt,window.BpmnLintConfig=Si,window.BpmnAutoLayout=Qe}();
