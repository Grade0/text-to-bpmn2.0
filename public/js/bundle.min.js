(()=>{var Gt=Object.defineProperty;var zt=(e,t)=>{for(var r in t)Gt(e,r,{get:t[r],enumerable:!0})};var ut={};zt(ut,{layoutProcess:()=>Mn});var we=Object.prototype.toString,jt=Object.prototype.hasOwnProperty;function Ge(e){return e===void 0}function Vt(e){return e!==void 0}function mt(e){return e==null}function ft(e){return we.call(e)==="[object Array]"}function yt(e){return we.call(e)==="[object Object]"}function ze(e){let t=we.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Q(e){return we.call(e)==="[object String]"}function je(e,t){return!mt(e)&&jt.call(e,t)}function Ve(e,t){let r=Ue(t),n;return A(e,function(i,a){if(r(i,a))return n=i,!1}),n}function dt(e,t){let r=Ue(t),n=ft(e)?-1:void 0;return A(e,function(i,a){if(r(i,a))return n=a,!1}),n}function Ce(e,t){let r=Ue(t),n=[];return A(e,function(i,a){r(i,a)&&n.push(i)}),n}function A(e,t){let r,n;if(Ge(e))return;let i=ft(e)?Ht:Ut;for(let a in e)if(je(e,a)&&(r=e[a],n=t(r,i(a)),n===!1))return r}function ht(e,t){let r=[];return A(e,function(n,i){r.push(t(n,i))}),r}function Ue(e){return ze(e)?e:t=>t===e}function Ut(e){return e}function Ht(e){return Number(e)}function le(e,t){return e.bind(t)}function w(e,...t){return Object.assign(e,...t)}function gt(e,t,r){let n=e;return A(t,function(i,a){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let s=t[a+1],o=n[i];Vt(s)&&mt(o)&&(o=n[i]=isNaN(+s)?{}:[]),Ge(s)?Ge(r)?delete n[i]:n[i]=r:n=o}),e}function Ne(e,t){let r={},n=Object(e);return A(t,function(i){i in n&&(r[i]=e[i])}),r}function We(){}We.prototype.get=function(e){return this.$model.properties.get(this,e)};We.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function Et(e,t){this.model=e,this.properties=t}Et.prototype.createType=function(e){var t=this.model,r=this.properties,n=Object.create(We.prototype);A(e.properties,function(s){!s.isMany&&s.default!==void 0&&(n[s.name]=s.default)}),r.defineModel(n,t),r.defineDescriptor(n,e);var i=e.ns.name;function a(s){r.define(this,"$type",{value:i,enumerable:!0}),r.define(this,"$attrs",{value:{}}),r.define(this,"$parent",{writable:!0}),A(s,le(function(o,u){this.set(u,o)},this))}return a.prototype=n,a.hasType=n.$instanceOf=this.model.hasType,r.defineModel(a,t),r.defineDescriptor(a,e),a};var qt={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},At={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Pe(e,t){var r=At[e];return r?r(t):t}function He(e){return!!qt[e]}function Ke(e){return!!At[e]}function T(e,t){var r=e.split(/:/),n,i;if(r.length===1)n=e,i=t;else if(r.length===2)n=r[1],i=r[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(i?i+":":"")+n,{name:e,prefix:i,localName:n}}function W(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}W.prototype.build=function(){return Ne(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};W.prototype.addProperty=function(e,t,r){typeof t=="boolean"&&(r=t,t=void 0),this.addNamedProperty(e,r!==!1);var n=this.properties;t!==void 0?n.splice(t,0,e):n.push(e)};W.prototype.replaceProperty=function(e,t,r){var n=e.ns,i=this.properties,a=this.propertiesByName,s=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var o=i.indexOf(e);if(o===-1)throw new Error("property <"+n.name+"> not found in property list");i.splice(o,1),this.addProperty(t,r?void 0:o,s),a[n.name]=a[n.localName]=t};W.prototype.redefineProperty=function(e,t,r){var n=e.ns.prefix,i=t.split("#"),a=T(i[0],n),s=T(i[1],a.prefix).name,o=this.propertiesByName[s];if(o)this.replaceProperty(o,e,r);else throw new Error("refined property <"+s+"> not found");delete e.redefines};W.prototype.addNamedProperty=function(e,t){var r=e.ns,n=this.propertiesByName;t&&(this.assertNotDefined(e,r.name),this.assertNotDefined(e,r.localName)),n[r.name]=n[r.localName]=e};W.prototype.removeNamedProperty=function(e){var t=e.ns,r=this.propertiesByName;delete r[t.name],delete r[t.localName]};W.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};W.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};W.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};W.prototype.assertNotDefined=function(e,t){var r=e.name,n=this.propertiesByName[r];if(n)throw new Error("property <"+r+"> already defined; override of <"+n.definedBy.ns.name+"#"+n.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};W.prototype.hasProperty=function(e){return this.propertiesByName[e]};W.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var r=this.allTypesByName,n=this.allTypes,i=e.name;i in r||(A(e.properties,le(function(a){a=w({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var s=a.replaces,o=a.redefines;s||o?this.redefineProperty(a,s||o,s):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),n.push(e),r[i]=e)};function ae(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,A(e,le(this.registerPackage,this))}ae.prototype.getPackage=function(e){return this.packageMap[e]};ae.prototype.getPackages=function(){return this.packages};ae.prototype.registerPackage=function(e){e=w({},e);var t=this.packageMap;vt(t,e,"prefix"),vt(t,e,"uri"),A(e.types,le(function(r){this.registerType(r,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};ae.prototype.registerType=function(e,t){e=w({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:w(e.meta||{})});var r=T(e.name,t.prefix),n=r.name,i={};A(e.properties,le(function(a){var s=T(a.name,r.prefix),o=s.name;He(a.type)||(a.type=T(a.type,s.prefix).name),w(a,{ns:s,name:o}),i[o]=a},this)),w(e,{ns:r,name:n,propertiesByName:i}),A(e.extends,le(function(a){var s=T(a,r.prefix),o=this.typeMap[s.name];o.traits=o.traits||[],o.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e};ae.prototype.mapTypes=function(e,t,r){var n=He(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function a(u,p){var l=T(u,He(u)?"":e.prefix);i.mapTypes(l,t,p)}function s(u){return a(u,!0)}function o(u){return a(u,!1)}if(!n)throw new Error("unknown type <"+e.name+">");A(n.superClass,r?s:o),t(n,!r),A(n.traits,s)};ae.prototype.getEffectiveDescriptor=function(e){var t=T(e),r=new W(t);this.mapTypes(t,function(i,a){r.addTrait(i,a)});var n=r.build();return this.definePackage(n,n.allTypes[n.allTypes.length-1].$pkg),n};ae.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function vt(e,t,r){var n=t[r];if(n in e)throw new Error("package with "+r+" <"+n+"> already defined")}function ce(e){this.model=e}ce.prototype.set=function(e,t,r){if(!Q(t)||!t.length)throw new TypeError("property name must be a non-empty string");var n=this.getProperty(e,t),i=n&&n.name;Wt(r)?n?delete e[i]:delete e.$attrs[qe(t)]:n?i in e?e[i]=r:bt(e,n,r):e.$attrs[qe(t)]=r};ce.prototype.get=function(e,t){var r=this.getProperty(e,t);if(!r)return e.$attrs[qe(t)];var n=r.name;return!e[n]&&r.isMany&&bt(e,r,[]),e[n]};ce.prototype.define=function(e,t,r){if(!r.writable){var n=r.value;r=w({},r,{get:function(){return n}}),delete r.value}Object.defineProperty(e,t,r)};ce.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};ce.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};ce.prototype.getProperty=function(e,t){var r=this.model,n=r.getPropertyDescriptor(e,t);if(n)return n;if(t.includes(":"))return null;let i=r.config.strict;if(typeof i<"u"){let a=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(i)throw a;typeof console<"u"&&console.warn(a)}return null};function Wt(e){return typeof e>"u"}function bt(e,t,r){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:r,configurable:!0})}function qe(e){return e.replace(/^:/,"")}function V(e,t={}){this.properties=new ce(this),this.factory=new Et(this,this.properties),this.registry=new ae(e,this.properties),this.typeCache={},this.config=t}V.prototype.create=function(e,t){var r=this.getType(e);if(!r)throw new Error("unknown type <"+e+">");return new r(t)};V.prototype.getType=function(e){var t=this.typeCache,r=Q(e)?e:e.ns.name,n=t[r];return n||(e=this.registry.getEffectiveDescriptor(r),n=t[r]=this.factory.createType(e)),n};V.prototype.createAny=function(e,t,r){var n=T(e),i={$type:e,$instanceOf:function(s){return s===this.$type},get:function(s){return this[s]},set:function(s,o){gt(this,[s],o)}},a={name:e,isGeneric:!0,ns:{prefix:n.prefix,localName:n.localName,uri:t}};return this.properties.defineDescriptor(i,a),this.properties.defineModel(i,this),this.properties.define(i,"get",{enumerable:!1,writable:!0}),this.properties.define(i,"set",{enumerable:!1,writable:!0}),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),A(r,function(s,o){yt(s)&&s.value!==void 0?i[s.name]=s.value:i[o]=s}),i};V.prototype.getPackage=function(e){return this.registry.getPackage(e)};V.prototype.getPackages=function(){return this.registry.getPackages()};V.prototype.getElementDescriptor=function(e){return e.$descriptor};V.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var r=e.$model.getElementDescriptor(e);return t in r.allTypesByName};V.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};V.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var xt=String.fromCharCode,Kt=Object.prototype.hasOwnProperty,Xt=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,be={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(be).forEach(function(e){be[e.toUpperCase()]=be[e]});function Yt(e,t,r,n){return n?Kt.call(be,n)?be[n]:"&"+n+";":xt(t||parseInt(r,16))}function me(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(Xt,Yt):e}var Rt="non-whitespace outside of root node";function he(e){return new Error(e)}function wt(e){return"missing namespace for prefix <"+e+">"}function Me(e){return{get:e,enumerable:!0}}function Qt(e){var t={},r;for(r in e)t[r]=e[r];return t}function Xe(e){return e+"$uri"}function Zt(e){var t={},r,n;for(r in e)n=e[r],t[n]=n,t[Xe(n)]=r;return t}function Ct(){return{line:0,column:0}}function Jt(e){throw e}function Ye(e){if(!this)return new Ye(e);var t=e&&e.proxy,r,n,i,a,s=Jt,o,u,p,l,g=Ct,I=!1,G=!1,re=null,M=!1,H;function $(c){c instanceof Error||(c=he(c)),re=c,s(c,g)}function O(c){o&&(c instanceof Error||(c=he(c)),o(c,g))}this.on=function(c,m){if(typeof m!="function")throw he("required args <name, cb>");switch(c){case"openTag":n=m;break;case"text":r=m;break;case"closeTag":i=m;break;case"error":s=m;break;case"warn":o=m;break;case"cdata":a=m;break;case"attention":l=m;break;case"question":p=m;break;case"comment":u=m;break;default:throw he("unsupported event: "+c)}return this},this.ns=function(c){if(typeof c>"u"&&(c={}),typeof c!="object")throw he("required args <nsMap={}>");var m={},f;for(f in c)m[f]=c[f];return G=!0,H=m,this},this.parse=function(c){if(typeof c!="string")throw he("required args <xml=string>");return re=null,Oe(c),g=Ct,M=!1,re},this.stop=function(){M=!0};function Oe(c){var m=G?[]:null,f=G?Zt(H):null,b,R=[],q=0,D=!1,N=!1,h=0,d=0,S,pt,B,v,Ee,Ae,z,ke,Le,Fe="",$e=0,ye;function _e(){if(ye!==null)return ye;var ne,oe,X,ue=G&&f.xmlns,J=G&&I?[]:null,P=$e,k=Fe,pe=k.length,lt,ie,ee,Y,x,de={},ct={},K,y,E;e:for(;P<pe;P++)if(K=!1,y=k.charCodeAt(P),!(y===32||y<14&&y>8)){for((y<65||y>122||y>90&&y<97)&&y!==95&&y!==58&&(O("illegal first char attribute name"),K=!0),E=P+1;E<pe;E++)if(y=k.charCodeAt(E),!(y>96&&y<123||y>64&&y<91||y>47&&y<59||y===46||y===45||y===95)){if(y===32||y<14&&y>8){O("missing attribute value"),P=E;continue e}if(y===61)break;O("illegal attribute name char"),K=!0}if(x=k.substring(P,E),x==="xmlns:xmlns"&&(O("illegal declaration of xmlns"),K=!0),y=k.charCodeAt(E+1),y===34)E=k.indexOf('"',P=E+2),E===-1&&(E=k.indexOf("'",P),E!==-1&&(O("attribute value quote missmatch"),K=!0));else if(y===39)E=k.indexOf("'",P=E+2),E===-1&&(E=k.indexOf('"',P),E!==-1&&(O("attribute value quote missmatch"),K=!0));else for(O("missing attribute value quotes"),K=!0,E=E+1;E<pe&&(y=k.charCodeAt(E+1),!(y===32||y<14&&y>8));E++);for(E===-1&&(O("missing closing quotes"),E=pe,K=!0),K||(ee=k.substring(P,E)),P=E;E+1<pe&&(y=k.charCodeAt(E+1),!(y===32||y<14&&y>8));E++)P===E&&(O("illegal character after attribute end"),K=!0);if(P=E+1,K)continue e;if(x in ct){O("attribute <"+x+"> already defined");continue}if(ct[x]=!0,!G){de[x]=ee;continue}if(I){if(ie=x==="xmlns"?"xmlns":x.charCodeAt(0)===120&&x.substr(0,6)==="xmlns:"?x.substr(6):null,ie!==null){if(ne=me(ee),oe=Xe(ie),Y=H[ne],!Y){if(ie==="xmlns"||oe in f&&f[oe]!==ne)do Y="ns"+q++;while(typeof f[Y]<"u");else Y=ie;H[ne]=Y}f[ie]!==Y&&(lt||(f=Qt(f),lt=!0),f[ie]=Y,ie==="xmlns"&&(f[Xe(Y)]=ne,ue=Y),f[oe]=ne),de[x]=ee;continue}J.push(x,ee);continue}if(y=x.indexOf(":"),y===-1){de[x]=ee;continue}if(!(X=f[x.substring(0,y)])){O(wt(x.substring(0,y)));continue}x=ue===X?x.substr(y+1):X+x.substr(y),de[x]=ee}if(I)for(P=0,pe=J.length;P<pe;P++){if(x=J[P++],ee=J[P],y=x.indexOf(":"),y!==-1){if(!(X=f[x.substring(0,y)])){O(wt(x.substring(0,y)));continue}x=ue===X?x.substr(y+1):X+x.substr(y)}de[x]=ee}return ye=de}function _t(){for(var ne=/(\r\n|\r|\n)/g,oe=0,X=0,ue=0,J=d,P,k;h>=ue&&(P=ne.exec(c),!(!P||(J=P[0].length+P.index,J>h)));)oe+=1,ue=J;return h==-1?(X=J,k=c.substring(d)):d===0?k=c.substring(d,h):(X=h-ue,k=d==-1?c.substring(h):c.substring(h,d+1)),{data:k,line:oe,column:X}}for(g=_t,t&&(Le=Object.create({},{name:Me(function(){return z}),originalName:Me(function(){return ke}),attrs:Me(_e),ns:Me(function(){return f})}));d!==-1;){if(c.charCodeAt(d)===60?h=d:h=c.indexOf("<",d),h===-1){if(R.length)return $("unexpected end of file");if(d===0)return $("missing start tag");d<c.length&&c.substring(d).trim()&&O(Rt);return}if(d!==h){if(R.length){if(r&&(r(c.substring(d,h),me,g),M))return}else if(c.substring(d,h).trim()&&(O(Rt),M))return}if(v=c.charCodeAt(h+1),v===33){if(B=c.charCodeAt(h+2),B===91&&c.substr(h+3,6)==="CDATA["){if(d=c.indexOf("]]>",h),d===-1)return $("unclosed cdata");if(a&&(a(c.substring(h+9,d),g),M))return;d+=3;continue}if(B===45&&c.charCodeAt(h+3)===45){if(d=c.indexOf("-->",h),d===-1)return $("unclosed comment");if(u&&(u(c.substring(h+4,d),me,g),M))return;d+=3;continue}}if(v===63){if(d=c.indexOf("?>",h),d===-1)return $("unclosed question");if(p&&(p(c.substring(h,d+2),g),M))return;d+=2;continue}for(S=h+1;;S++){if(Ee=c.charCodeAt(S),isNaN(Ee))return d=-1,$("unclosed tag");if(Ee===34)B=c.indexOf('"',S+1),S=B!==-1?B:S;else if(Ee===39)B=c.indexOf("'",S+1),S=B!==-1?B:S;else if(Ee===62){d=S;break}}if(v===33){if(l&&(l(c.substring(h,d+1),me,g),M))return;d+=1;continue}if(ye={},v===47){if(D=!1,N=!0,!R.length)return $("missing open tag");if(S=z=R.pop(),B=h+2+S.length,c.substring(h+2,B)!==S)return $("closing tag mismatch");for(;B<d;B++)if(v=c.charCodeAt(B),!(v===32||v>8&&v<14))return $("close tag")}else{if(c.charCodeAt(d-1)===47?(S=z=c.substring(h+1,d-1),D=!0,N=!0):(S=z=c.substring(h+1,d),D=!0,N=!1),!(v>96&&v<123||v>64&&v<91||v===95||v===58))return $("illegal first char nodeName");for(B=1,pt=S.length;B<pt;B++)if(v=S.charCodeAt(B),!(v>96&&v<123||v>64&&v<91||v>47&&v<59||v===45||v===95||v==46)){if(v===32||v<14&&v>8){z=S.substring(0,B),ye=null;break}return $("invalid nodeName")}N||R.push(z)}if(G){if(b=f,D&&(N||m.push(b),ye===null&&(I=S.indexOf("xmlns",B)!==-1)&&($e=B,Fe=S,_e(),I=!1)),ke=z,v=z.indexOf(":"),v!==-1){if(Ae=f[z.substring(0,v)],!Ae)return $("missing namespace on <"+ke+">");z=z.substr(v+1)}else Ae=f.xmlns;Ae&&(z=Ae+":"+z)}if(D&&($e=B,Fe=S,n&&(t?n(Le,me,N,g):n(z,_e,me,N,g),M)))return;if(N){if(i&&(i(t?Le:z,me,D,g),M))return;G&&(D?f=b:f=m.pop())}d+=1}}}function Nt(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Qe={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Pt="property";function Mt(e){return e.xml&&e.xml.serialize}function er(e){let t=Mt(e);return t!==Pt&&(t||null)}function tr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function St(e,t){return Nt(t)?e.prefix+":"+tr(e.localName):e.name}function rr(e,t){var r=e.name,n=e.localName,i=t&&t.xml&&t.xml.typePrefix;return i&&n.indexOf(i)===0?e.prefix+":"+n.slice(i.length):r}function nr(e,t,r){let n=T(e,t.xmlns),i=`${t[n.prefix]||n.prefix}:${n.localName}`,a=T(i);var s=r.getPackage(a.prefix);return rr(a,s)}function se(e){return new Error(e)}function te(e){return e.$descriptor}function ir(e){w(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw se("expected element");var r=this.elementsById,n=te(t),i=n.idProperty,a;if(i&&(a=t.get(i.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(r[a])throw se("duplicate ID <"+a+">");r[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function xe(){}xe.prototype.handleEnd=function(){};xe.prototype.handleText=function(){};xe.prototype.handleNode=function(){};function Ze(){}Ze.prototype=Object.create(xe.prototype);Ze.prototype.handleNode=function(){return this};function ve(){}ve.prototype=Object.create(xe.prototype);ve.prototype.handleText=function(e){this.body=(this.body||"")+e};function Re(e,t){this.property=e,this.context=t}Re.prototype=Object.create(ve.prototype);Re.prototype.handleNode=function(e){if(this.element)throw se("expected no sub nodes");return this.element=this.createReference(e),this};Re.prototype.handleEnd=function(){this.element.id=this.body};Re.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Je(e,t){this.element=t,this.propertyDesc=e}Je.prototype=Object.create(ve.prototype);Je.prototype.handleEnd=function(){var e=this.body||"",t=this.element,r=this.propertyDesc;e=Pe(r.type,e),r.isMany?t.get(r.name).push(e):t.set(r.name,e)};function Se(){}Se.prototype=Object.create(ve.prototype);Se.prototype.handleNode=function(e){var t=this,r=this.element;return r?t=this.handleChild(e):(r=this.element=this.createElement(e),this.context.addElement(r)),t};function _(e,t,r){this.model=e,this.type=e.getType(t),this.context=r}_.prototype=Object.create(Se.prototype);_.prototype.addReference=function(e){this.context.addReference(e)};_.prototype.handleText=function(e){var t=this.element,r=te(t),n=r.bodyProperty;if(!n)throw se("unexpected body text <"+e+">");ve.prototype.handleText.call(this,e)};_.prototype.handleEnd=function(){var e=this.body,t=this.element,r=te(t),n=r.bodyProperty;n&&e!==void 0&&(e=Pe(n.type,e),t.set(n.name,e))};_.prototype.createElement=function(e){var t=e.attributes,r=this.type,n=te(r),i=this.context,a=new r({}),s=this.model,o;return A(t,function(u,p){var l=n.propertiesByName[p],g;l&&l.isReference?l.isMany?(g=u.split(" "),A(g,function(I){i.addReference({element:a,property:l.ns.name,id:I})})):i.addReference({element:a,property:l.ns.name,id:u}):(l?u=Pe(l.type,u):p==="xmlns"?p=":"+p:(o=T(p,n.ns.prefix),s.getPackage(o.prefix)&&i.addWarning({message:"unknown attribute <"+p+">",element:a,property:p,value:u})),a.set(p,u))}),a};_.prototype.getPropertyForNode=function(e){var t=e.name,r=T(t),n=this.type,i=this.model,a=te(n),s=r.name,o=a.propertiesByName[s];if(o&&!o.isAttr){let p=er(o);if(p){let l=e.attributes[p];if(l){let g=nr(l,e.ns,i),I=i.getType(g);return w({},o,{effectiveType:te(I).name})}}return o}var u=i.getPackage(r.prefix);if(u){let p=St(r,u),l=i.getType(p);if(o=Ve(a.properties,function(g){return!g.isVirtual&&!g.isReference&&!g.isAttribute&&l.hasType(g.type)}),o)return w({},o,{effectiveType:te(l).name})}else if(o=Ve(a.properties,function(p){return!p.isReference&&!p.isAttribute&&p.type==="Element"}),o)return o;throw se("unrecognized element <"+r.name+">")};_.prototype.toString=function(){return"ElementDescriptor["+te(this.type).name+"]"};_.prototype.valueHandler=function(e,t){return new Je(e,t)};_.prototype.referenceHandler=function(e){return new Re(e,this.context)};_.prototype.handler=function(e){return e==="Element"?new ge(this.model,e,this.context):new _(this.model,e,this.context)};_.prototype.handleChild=function(e){var t,r,n,i;if(t=this.getPropertyForNode(e),n=this.element,r=t.effectiveType||t.type,Ke(r))return this.valueHandler(t,n);t.isReference?i=this.referenceHandler(t).handleNode(e):i=this.handler(r).handleNode(e);var a=i.element;return a!==void 0&&(t.isMany?n.get(t.name).push(a):n.set(t.name,a),t.isReference?(w(a,{element:n}),this.context.addReference(a)):a.$parent=n),i};function et(e,t,r){_.call(this,e,t,r)}et.prototype=Object.create(_.prototype);et.prototype.createElement=function(e){var t=e.name,r=T(t),n=this.model,i=this.type,a=n.getPackage(r.prefix),s=a&&St(r,a)||t;if(!i.hasType(s))throw se("unexpected element <"+e.originalName+">");return _.prototype.createElement.call(this,e)};function ge(e,t,r){this.model=e,this.context=r}ge.prototype=Object.create(Se.prototype);ge.prototype.createElement=function(e){var t=e.name,r=T(t),n=r.prefix,i=e.ns[n+"$uri"],a=e.attributes;return this.model.createAny(t,i,a)};ge.prototype.handleChild=function(e){var t=new ge(this.model,"Element",this.context).handleNode(e),r=this.element,n=t.element,i;return n!==void 0&&(i=r.$children=r.$children||[],i.push(n),n.$parent=r),t};ge.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Be(e){e instanceof V&&(e={model:e}),w(this,{lax:!1},e)}Be.prototype.fromXML=function(e,t,r){var n=t.rootHandler;t instanceof _?(n=t,t={}):typeof t=="string"?(n=this.handler(t),t={}):typeof n=="string"&&(n=this.handler(n));var i=this.model,a=this.lax,s=new ir(w({},t,{rootHandler:n})),o=new Ye({proxy:!0}),u=ar();n.context=s,u.push(n);function p(m,f,b){var R=f(),q=R.line,D=R.column,N=R.data;N.charAt(0)==="<"&&N.indexOf(" ")!==-1&&(N=N.slice(0,N.indexOf(" "))+">");var h="unparsable content "+(N?N+" ":"")+`detected
	line: `+q+`
	column: `+D+`
	nested error: `+m.message;if(b)return s.addWarning({message:h,error:m}),!0;throw se(h)}function l(m,f){return p(m,f,!0)}function g(){var m=s.elementsById,f=s.references,b,R;for(b=0;R=f[b];b++){var q=R.element,D=m[R.id],N=te(q).propertiesByName[R.property];if(D||s.addWarning({message:"unresolved reference <"+R.id+">",element:R.element,property:R.property,value:R.id}),N.isMany){var h=q.get(N.name),d=h.indexOf(R);d===-1&&(d=h.length),D?h[d]=D:h.splice(d,1)}else q.set(N.name,D)}}function I(){u.pop().handleEnd()}var G=/^<\?xml /i,re=/ encoding="([^"]+)"/i,M=/^utf-8$/i;function H(m){if(G.test(m)){var f=re.exec(m),b=f&&f[1];!b||M.test(b)||s.addWarning({message:"unsupported document encoding <"+b+">, falling back to UTF-8"})}}function $(m,f){var b=u.peek();try{u.push(b.handleNode(m))}catch(R){p(R,f,a)&&u.push(new Ze)}}function O(m,f){try{u.peek().handleText(m)}catch(b){l(b,f)}}function Oe(m,f){m.trim()&&O(m,f)}var c=i.getPackages().reduce(function(m,f){return m[f.uri]=f.prefix,m},Object.entries(Qe).reduce(function(m,[f,b]){return m[b]=f,m},i.config&&i.config.nsMap||{}));return o.ns(c).on("openTag",function(m,f,b,R){var q=m.attrs||{},D=Object.keys(q).reduce(function(h,d){var S=f(q[d]);return h[d]=S,h},{}),N={name:m.name,originalName:m.originalName,attributes:D,ns:m.ns};$(N,R)}).on("question",H).on("closeTag",I).on("cdata",O).on("text",function(m,f,b){Oe(f(m),b)}).on("error",p).on("warn",l),new Promise(function(m,f){var b;try{o.parse(e),g()}catch(h){b=h}var R=n.element;!b&&!R&&(b=se("failed to parse document as <"+n.type.$descriptor.name+">"));var q=s.warnings,D=s.references,N=s.elementsById;return b?(b.warnings=q,f(b)):m({rootElement:R,elementsById:N,references:D,warnings:q})})};Be.prototype.handler=function(e){return new et(this.model,e)};function ar(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var sr=`<?xml version="1.0" encoding="UTF-8"?>
`,or=/<|>|'|"|&|\n\r|\n/g,Bt=/<|>|&/g;function Z(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}Z.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e};Z.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]};Z.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)};Z.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)};Z.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)};Z.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t};Z.prototype.getNSKey=function(e){return e.prefix!==void 0?e.uri+"|"+e.prefix:e.uri};Z.prototype.logUsed=function(e){var t=e.uri,r=this.getNSKey(e);this.used[r]=this.byUri(t),this.parent&&this.parent.logUsed(e)};Z.prototype.getUsed=function(e){var t=[].concat(this.wellknown,this.custom);return t.filter(r=>{var n=this.getNSKey(r);return this.used[n]})};function ur(e){return e.charAt(0).toLowerCase()+e.slice(1)}function pr(e,t){return Nt(t)?ur(e):e}function Dt(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Tt(e){return Q(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function lr(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var r="xmlns"+(t.prefix?":"+t.prefix:"");return{name:r,value:t.uri}})}function cr(e,t){return t.isGeneric?w({localName:t.ns.localName},e):w({localName:pr(t.ns.localName,t.$pkg)},e)}function mr(e,t){return w({localName:t.ns.localName},e)}function fr(e){var t=e.$descriptor;return Ce(t.properties,function(r){var n=r.name;if(r.isVirtual||!je(e,n))return!1;var i=e[n];return i===r.default||i===null?!1:r.isMany?i.length:!0})}var yr={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},dr={"<":"lt",">":"gt","&":"amp"};function It(e,t,r){return e=Q(e)?e:""+e,e.replace(t,function(n){return"&"+r[n]+";"})}function hr(e){return It(e,or,yr)}function gr(e){return It(e,Bt,dr)}function vr(e){return Ce(e,function(t){return t.isAttr})}function Er(e){return Ce(e,function(t){return!t.isAttr})}function tt(e){this.tagName=e}tt.prototype.build=function(e){return this.element=e,this};tt.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function fe(){}fe.prototype.serializeValue=fe.prototype.serializeTo=function(e){e.append(this.escape?gr(this.value):this.value)};fe.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Bt)!==-1&&(this.escape=!0),this};function rt(e){this.tagName=e}Dt(rt,fe);rt.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function C(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}C.prototype.build=function(e){this.element=e;var t=e.$descriptor,r=this.propertyDescriptor,n,i,a=t.isGeneric;return a?n=this.parseGenericNsAttributes(e):n=this.parseNsAttributes(e),r?this.ns=this.nsPropertyTagName(r):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a?this.parseGenericContainments(e):(i=fr(e),this.parseAttributes(vr(i)),this.parseContainments(Er(i))),this.parseGenericAttributes(e,n),this};C.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return cr(t,e)};C.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return mr(t,e)};C.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};C.prototype.nsAttributeName=function(e){var t;if(Q(e)?t=T(e):t=e.ns,e.inherited)return{localName:t.localName};var r=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(r),this.isLocalNs(r)?{localName:t.localName}:w({localName:t.localName},r)};C.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,r])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,r)).map(([t,r])=>({name:t,value:r}))};C.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new fe().build({type:"String"},t));var r=e.$children;r&&A(r,n=>{this.body.push(new C(this).build(n))})};C.prototype.parseNsAttribute=function(e,t,r){var n=e.$model,i=T(t),a;if(i.prefix==="xmlns"&&(a={prefix:i.localName,uri:r}),!i.prefix&&i.localName==="xmlns"&&(a={uri:r}),!a)return{name:t,value:r};if(n&&n.getPackage(r))this.logNamespace(a,!0,!0);else{var s=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(s)}};C.prototype.parseNsAttributes=function(e){var t=this,r=e.$attrs,n=[];return A(r,function(i,a){var s=t.parseNsAttribute(e,a,i);s&&n.push(s)}),n};C.prototype.parseGenericAttributes=function(e,t){var r=this;A(t,function(n){try{r.addAttribute(r.nsAttributeName(n.name),n.value)}catch(i){typeof console<"u"&&console.warn(`missing namespace information for <${n.name}=${n.value}> on`,e,i)}})};C.prototype.parseContainments=function(e){var t=this,r=this.body,n=this.element;A(e,function(i){var a=n.get(i.name),s=i.isReference,o=i.isMany;if(o||(a=[a]),i.isBody)r.push(new fe().build(i,a[0]));else if(Ke(i.type))A(a,function(p){r.push(new rt(t.addTagName(t.nsPropertyTagName(i))).build(i,p))});else if(s)A(a,function(p){r.push(new tt(t.addTagName(t.nsPropertyTagName(i))).build(p))});else{var u=Mt(i);A(a,function(p){var l;u?u===Pt?l=new C(t,i):l=new De(t,i,u):l=new C(t),r.push(l.build(p))})}})};C.prototype.getNamespaces=function(e){var t=this.namespaces,r=this.parent,n;return t||(n=r&&r.getNamespaces(),e||!n?this.namespaces=t=new Z(n):t=n),t};C.prototype.logNamespace=function(e,t,r){var n=this.getNamespaces(r),i=e.uri,a=e.prefix,s=n.byUri(i);return(!s||r)&&n.add(e,t),n.mapPrefix(a,i),e};C.prototype.logNamespaceUsed=function(e,t){var r=this.getNamespaces(t),n=e.prefix,i=e.uri,a,s,o;if(!n&&!i)return{localName:e.localName};if(o=r.defaultUriByPrefix(n),i=i||o||r.uriByPrefix(n),!i)throw new Error("no namespace uri given for prefix <"+n+">");if(e=r.byUri(i),!e&&!n&&(e=this.logNamespace({uri:i},o===i,!0)),!e){for(a=n,s=1;r.uriByPrefix(a);)a=n+"_"+s++;e=this.logNamespace({prefix:a,uri:i},o===i)}return n&&r.mapPrefix(n,i),e};C.prototype.parseAttributes=function(e){var t=this,r=this.element;A(e,function(n){var i=r.get(n.name);if(n.isReference)if(!n.isMany)i=i.id;else{var a=[];A(i,function(s){a.push(s.id)}),i=a.join(" ")}t.addAttribute(t.nsAttributeName(n),i)})};C.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Tt(e)};C.prototype.addAttribute=function(e,t){var r=this.attrs;Q(t)&&(t=hr(t));var n=dt(r,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),i={name:e,value:t};n!==-1?r.splice(n,1,i):r.push(i)};C.prototype.serializeAttributes=function(e){var t=this.attrs,r=this.namespaces;r&&(t=lr(r).concat(t)),A(t,function(n){e.append(" ").append(Tt(n.name)).append('="').append(n.value).append('"')})};C.prototype.serializeTo=function(e){var t=this.body[0],r=t&&t.constructor!==fe;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(r&&e.appendNewLine().indent(),A(this.body,function(n){n.serializeTo(e)}),r&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function De(e,t,r){C.call(this,e,t),this.serialization=r}Dt(De,C);De.prototype.parseNsAttributes=function(e){var t=C.prototype.parseNsAttributes.call(this,e).filter(s=>s.name!==this.serialization),r=e.$descriptor;if(r.name===this.propertyDescriptor.type)return t;var n=this.typeNs=this.nsTagName(r);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(n.uri),a=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(n.prefix?n.prefix+":":"")+a+r.ns.localName),t};De.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Ar(){this.value="",this.write=function(e){this.value+=e}}function br(e,t){var r=[""];this.append=function(n){return e.write(n),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(r.join("  ")),this},this.indent=function(){return r.push(""),this},this.unindent=function(){return r.pop(),this}}function Ot(e){e=w({format:!1,preamble:!0},e||{});function t(r,n){var i=n||new Ar,a=new br(i,e.format);e.preamble&&a.append(sr);var s=new C,o=r.$model;if(s.getNamespaces().mapDefaultPrefixes(xr(o)),s.build(r).serializeTo(a),!n)return i.value}return{toXML:t}}function xr(e){let t=e.config&&e.config.nsMap||{},r={};for(let n in Qe)r[n]=Qe[n];for(let n in t){let i=t[n];r[i]=n}for(let n of e.getPackages())r[n.prefix]=n.uri;return r}function Te(e,t){V.call(this,e,t)}Te.prototype=Object.create(V.prototype);Te.prototype.fromXML=function(e,t,r){Q(t)||(r=t,t="bpmn:Definitions");var n=new Be(w({model:this,lax:!0},r)),i=n.handler(t);return n.fromXML(e,i)};Te.prototype.toXML=function(e,t){var r=new Ot(t);return new Promise(function(n,i){try{var a=r.toXML(e);return n({xml:a})}catch(s){return i(s)}})};var Rr="BPMN20",wr="http://www.omg.org/spec/BPMN/20100524/MODEL",Cr="bpmn",Nr=[],Pr=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],Mr=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],Sr={tagAlias:"lowerCase",typePrefix:"t"},Br={name:Rr,uri:wr,prefix:Cr,associations:Nr,types:Pr,enumerations:Mr,xml:Sr},Dr="BPMNDI",Tr="http://www.omg.org/spec/BPMN/20100524/DI",Ir="bpmndi",Or=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],kr=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],Lr=[],Fr={name:Dr,uri:Tr,prefix:Ir,types:Or,enumerations:kr,associations:Lr},$r="DC",_r="http://www.omg.org/spec/DD/20100524/DC",Gr="dc",zr=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],jr=[],Vr={name:$r,uri:_r,prefix:Gr,types:zr,associations:jr},Ur="DI",Hr="http://www.omg.org/spec/DD/20100524/DI",qr="di",Wr=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Kr=[],Xr={tagAlias:"lowerCase"},Yr={name:Ur,uri:Hr,prefix:qr,types:Wr,associations:Kr,xml:Xr},Qr="bpmn.io colors for BPMN",Zr="http://bpmn.io/schema/bpmn/biocolor/1.0",Jr="bioc",en=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],tn=[],rn=[],nn={name:Qr,uri:Zr,prefix:Jr,types:en,enumerations:tn,associations:rn},an="BPMN in Color",sn="http://www.omg.org/spec/BPMN/non-normative/color/1.0",on="color",un=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],pn=[],ln=[],cn={name:an,uri:sn,prefix:on,types:un,enumerations:pn,associations:ln},mn={bpmn:Br,bpmndi:Fr,dc:Vr,di:Yr,bioc:nn,color:cn};function kt(e,t){let r=w({},mn,e);return new Te(r,t)}function fn(e){return!!e.sourceRef}function nt(e){return!!e.attachedToRef}function Ft(e,t,r=new Set){if(e===t)return!0;if(r.has(e)||(r.add(e),!e.outgoing||e.outgoing.length===0))return!1;for(let n of e.outgoing.map(i=>i.targetRef))if(Ft(n,t,r))return!0;return!1}var it=class{constructor(){this.grid=[]}add(t,r){if(!r){this._addStart(t);return}let[n,i]=r;if(!n&&!i&&this._addStart(t),this.grid[n]||(this.grid[n]=[]),this.grid[n][i])throw new Error("Grid is occupied please ensure the place you insert at is not occupied");this.grid[n][i]=t}createRow(t){t||this.grid.push([]),this.grid.splice(t+1,0,[])}_addStart(t){this.grid.push([t])}addAfter(t,r){t||this._addStart(r);let[n,i]=this.find(t);this.grid[n].splice(i+1,0,r)}addBelow(t,r){t||this._addStart(r);let[n,i]=this.find(t);if(this.grid[n+1]||(this.grid[n+1]=[]),this.grid[n+1][i]&&this.grid.splice(n+1,0,[]),this.grid[n+1][i])throw new Error("Grid is occupied and we could not find a place - this should not happen");this.grid[n+1][i]=r}find(t){let r,n;return r=this.grid.findIndex(i=>(n=i.findIndex(a=>a===t),n!==-1)),[r,n]}get(t,r){return(this.grid[t]||[])[r]}getElementsInRange({row:t,col:r},{row:n,col:i}){let a=[];t>n&&([t,n]=[n,t]),r>i&&([r,i]=[i,r]);for(let s=t;s<=n;s++)for(let o=r;o<=i;o++){let u=this.get(s,o);u&&a.push(u)}return a}adjustGridPosition(t){let[r,n]=this.find(t),[,i]=this.getGridDimensions();n<i-1&&(this.grid[r].length=i,this.grid[r][i]=t,this.grid[r][n]=null)}adjustRowForMultipleIncoming(t,r){let n=t.map(o=>this.find(o)),i=Math.min(...n.map(o=>o[0]).filter(o=>o>=0)),[a,s]=this.find(r);i<a&&!this.grid[i][s]&&(this.grid[i][s]=r,this.grid[a][s]=null)}adjustColumnForMultipleIncoming(t,r){let n=t.map(o=>this.find(o)),i=Math.max(...n.map(o=>o[1]).filter(o=>o>=0)),[a,s]=this.find(r);i+1>s&&(this.grid[a][i+1]=r,this.grid[a][s]=null)}getAllElements(){let t=[];for(let r=0;r<this.grid.length;r++)for(let n=0;n<this.grid[r].length;n++){let i=this.get(r,n);i&&t.push(i)}return t}getGridDimensions(){let t=this.grid.length,r=0;for(let n=0;n<t;n++){let i=this.grid[n].length;i>r&&(r=i)}return[t,r]}elementsByPosition(){let t=[];return this.grid.forEach((r,n)=>{r.forEach((i,a)=>{i&&t.push({element:i,row:n,col:a})})}),t}getElementsTotal(){let t=this.grid.flat();return new Set(t.filter(n=>n)).size}},at=class{constructor(t){this.moddle=t}create(t,r){return this.moddle.create(t,r||{})}createDiBounds(t){return this.create("dc:Bounds",t)}createDiLabel(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})}createDiShape(t,r,n){return this.create("bpmndi:BPMNShape",w({bpmnElement:t,bounds:this.createDiBounds(r)},n))}createDiWaypoints(t){var r=this;return ht(t,function(n){return r.createDiWaypoint(n)})}createDiWaypoint(t){return this.create("dc:Point",Ne(t,["x","y"]))}createDiEdge(t,r,n){return this.create("bpmndi:BPMNEdge",w({bpmnElement:t,waypoint:this.createDiWaypoints(r)},n))}createDiPlane(t){return this.create("bpmndi:BPMNPlane",t)}createDiDiagram(t){return this.create("bpmndi:BPMNDiagram",t)}};function yn(e){return F(e,"bpmn:SubProcess")?{width:100,height:80}:F(e,"bpmn:Task")?{width:100,height:80}:F(e,"bpmn:Gateway")?{width:50,height:50}:F(e,"bpmn:Event")?{width:36,height:36}:F(e,"bpmn:Participant")?{width:400,height:100}:F(e,"bpmn:Lane")?{width:400,height:100}:F(e,"bpmn:DataObjectReference")?{width:36,height:50}:F(e,"bpmn:DataStoreReference")?{width:50,height:50}:F(e,"bpmn:TextAnnotation")?{width:100,height:30}:{width:100,height:80}}function F(e,t){return e.$instanceOf(t)}var U=150,j=140;function st(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function L(e,t,r="r",n="top-left"){if(r==="h"&&(r=/left/.test(n)?"l":"r"),r==="v"&&(r=/top/.test(n)?"t":"b"),r==="t")return{original:e,x:e.x,y:t.y};if(r==="r")return{original:e,x:t.x+t.width,y:e.y};if(r==="b")return{original:e,x:e.x,y:t.y+t.height};if(r==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+r+">")}function $t(e,t,r){let n=e.di,i=t.di,a=n.get("bounds"),s=i.get("bounds"),o=st(a),u=st(s),p=t.gridPosition.col-e.gridPosition.col,l=t.gridPosition.row-e.gridPosition.row,g=`${l>0?"bottom":"top"}-${p>0?"right":"left"}`,I=`${l>0?"top":"bottom"}-${p>0?"left":"right"}`;if(p===0&&l===0){let{x:M,y:H}=dn(e.gridPosition.row,e.gridPosition.col);return[L(o,a,"r",g),{x:M+U,y:o.y},{x:M+U,y:H},{x:u.x,y:H},L(u,s,"t",I)]}if(l===0)return Lt(e,t,r)?[L(o,a,"b"),{x:o.x,y:o.y+j/2},{x:u.x,y:o.y+j/2},L(u,s,"b")]:[L(o,a,"h",g),L(u,s,"h",I)];if(p===0)if(Lt(e,t,r)){let M=-Math.sign(l)*j/2;return[L(o,a,"r"),{x:o.x+U/2,y:o.y},{x:u.x+U/2,y:u.y+M},{x:u.x,y:u.y+M},L(u,s,Math.sign(M)>0?"b":"t")]}else return[L(o,a,"v",g),L(u,s,"v",I)];if(p<0&&l<=0)return[L(o,a,"b"),{x:o.x,y:o.y+j/2},{x:u.x,y:o.y+j/2},L(u,s,"b")];let G=hn(e,t,r);if(G){let M=L(o,a,G[0],g),H=L(u,s,G[1],I),$=G[0]==="h"?{x:H.x,y:M.y}:{x:M.x,y:H.y};return[M,$,H]}let re=-Math.sign(l)*j/2;return[L(o,a,"r",g),{x:o.x+U/2,y:o.y},{x:o.x+U/2,y:u.y+re},{x:u.x-U/2,y:u.y+re},{x:u.x-U/2,y:u.y},L(u,s,"l",I)]}function dn(e,t){return{width:U,height:j,x:t*U,y:e*j}}function Ie(e,t,r,n){let{width:i,height:a}=yn(e);if(!n)return{width:i,height:a,x:r*U+(U-i)/2,y:t*j+(j-a)/2};let s=Ie(n,t,r);return{width:i,height:a,x:Math.round(s.x+s.width/2-i/2),y:Math.round(s.y+s.height-a/2)}}function Lt(e,t,r){let{row:n,col:i}=e.gridPosition,{row:a,col:s}=t.gridPosition,o=s-i,u=a-n,p=0;return o&&(p+=r.getElementsInRange({row:n,col:i},{row:n,col:s}).length),u&&(p+=r.getElementsInRange({row:n,col:s},{row:a,col:s}).length),p>2}function hn(e,t,r){let{row:n,col:i}=e.gridPosition,{row:a,col:s}=t.gridPosition,o=s-i,u=a-n;if(o>0&&u!==0)if(u>0){let p=0,l={row:a,col:i};return p+=r.getElementsInRange({row:n,col:i},l).length,p+=r.getElementsInRange(l,{row:a,col:s}).length,p>2?!1:["v","h"]}else{let p=0,l={row:n,col:s};return p+=r.getElementsInRange({row:n,col:i},l).length,p+=r.getElementsInRange(l,{row:a,col:s}).length,p>2?!1:["h","v"]}}var gn={addToGrid:({element:e,grid:t,visited:r})=>{let n=[];return(e.attachers||[]).map(a=>(a.outgoing||[]).reverse()).flat().map(a=>a.targetRef).forEach((a,s,o)=>{r.has(a)||(vn(a,e,t),n.push(a))}),n},createElementDi:({element:e,row:t,col:r,diFactory:n})=>{let i=Ie(e,t,r),a=[];return(e.attachers||[]).forEach((s,o,u)=>{s.gridPosition={row:t,col:r};let p=Ie(s,t,r,e);p.x=i.x+(o+1)*(i.width/(u.length+1))-p.width/2;let l=n.createDiShape(s,p,{id:s.id+"_di"});s.di=l,s.gridPosition={row:t,col:r},a.push(l)}),a},createConnectionDi:({element:e,row:t,col:r,layoutGrid:n,diFactory:i})=>(e.attachers||[]).flatMap(s=>(s.outgoing||[]).map(u=>{let p=u.targetRef,l=$t(s,p,n);return En(s,l,[t,r]),i.createDiEdge(u,l,{id:u.id+"_di"})}))};function vn(e,t,r){let[n,i]=r.find(t);(r.get(n+1,i)||r.get(n+1,i+1))&&r.createRow(n),r.add(e,[n+1,i+1])}function En(e,t,[r,n]){let a=e.di.get("bounds"),s=st(a),o=L(s,a,"b");if(t[0].x===o.x&&t[0].y===o.y)return;if(t.length===2){let p=[o,{x:o.x,y:(r+1)*j},{x:(n+1)*U,y:(r+1)*j},{x:(n+1)*U,y:(r+.5)*j}];t.splice(0,1,...p);return}let u=[o,{x:o.x,y:(r+1)*j},{x:t[1].x,y:(r+1)*j}];t.splice(0,1,...u)}var An={createElementDi:({element:e,row:t,col:r,diFactory:n})=>{let i=Ie(e,t,r),a={id:e.id+"_di"};F(e,"bpmn:ExclusiveGateway")&&(a.isMarkerVisible=!0);let s=n.createDiShape(e,i,a);return e.di=s,e.gridPosition={row:t,col:r},s}},bn={addToGrid:({element:e,grid:t,visited:r,stack:n})=>{let i=[],a=(e.outgoing||[]).map(o=>o.targetRef).filter(o=>o),s=null;return a.length>1&&Cn(a)&&t.adjustGridPosition(e),a.forEach((o,u,p)=>{r.has(o)||(s||n.length>0)&&wn(o,r)&&!Rn(o,r)||(s?F(e,"bpmn:ExclusiveGateway")&&F(o,"bpmn:ExclusiveGateway")?t.addAfter(s,o):t.addBelow(p[u-1],o):t.addAfter(e,o),o!==e&&(s=o),i.unshift(o),r.add(o))}),i=xn(i,"bpmn:ExclusiveGateway"),i},createConnectionDi:({element:e,row:t,col:r,layoutGrid:n,diFactory:i})=>(e.outgoing||[]).map(s=>{let o=s.targetRef,u=$t(e,o,n);return i.createDiEdge(s,u,{id:s.id+"_di"})})};function xn(e,t){let r=e.filter(i=>!F(i,t));return[...e.filter(i=>F(i,t)),...r]}function Rn(e,t){for(let r of e.incoming)if(!t.has(r.sourceRef))return Ft(e,r.sourceRef)}function wn(e,t){if(e.incoming.length>1){for(let r of e.incoming)if(!t.has(r.sourceRef))return!0}return!1}function Cn(e){return e.every(t=>F(t,"bpmn:Task"))}var Nn={addToGrid:({element:e,grid:t,visited:r})=>{let n=[],i=(e.incoming||[]).map(a=>a.sourceRef).filter(a=>a);return i.length>1&&(t.adjustColumnForMultipleIncoming(i,e),t.adjustRowForMultipleIncoming(i,e)),n}},Pn=[An,Nn,bn,gn],ot=class{constructor(){this.moddle=new kt,this.diFactory=new at(this.moddle),this._handlers=Pn}handle(t,r){return this._handlers.filter(n=>ze(n[t])).map(n=>n[t](r))}async layoutProcess(t){let{rootElement:r}=await this.moddle.fromXML(t);this.diagram=r;let n=this.getProcess();return n&&(this.cleanDi(),this.handlePlane(n)),(await this.moddle.toXML(this.diagram,{format:!0})).xml}handlePlane(t){let r=this.createGridLayout(t);this.generateDi(t,r)}cleanDi(){this.diagram.diagrams=[]}createGridLayout(t){let r=new it,n=t.flowElements||[],i=n.filter(p=>!F(p,"bpmn:SequenceFlow"));if(!n)return r;let a=n.filter(p=>!fn(p)&&!nt(p)&&(!p.incoming||p.length===0));n.filter(p=>nt(p)).forEach(p=>{let l=p.attachedToRef,g=l.attachers||[];g.push(p),l.attachers=g});let o=[...a],u=new Set;if(a.forEach(p=>{r.add(p),u.add(p)}),this.handleGrid(r,u,o),r.getElementsTotal()!=i.length){let p=r.getAllElements(),l=i.filter(g=>!p.includes(g)&&!nt(g));l.length>1&&(o.push(l[0]),r.add(l[0]),u.add(l[0]),this.handleGrid(r,u,o))}return r}generateDi(t,r){let n=this.diFactory,i=this.diagram;var a=n.createDiPlane({id:"BPMNPlane_"+t.id,bpmnElement:t}),s=n.createDiDiagram({id:"BPMNDiagram_"+t.id,plane:a});i.diagrams.unshift(s);let o=a.get("planeElement");r.elementsByPosition().forEach(({element:u,row:p,col:l})=>{let g=this.handle("createElementDi",{element:u,row:p,col:l,layoutGrid:r,diFactory:n}).flat();o.push(...g)}),r.elementsByPosition().forEach(({element:u,row:p,col:l})=>{let g=this.handle("createConnectionDi",{element:u,row:p,col:l,layoutGrid:r,diFactory:n}).flat();o.push(...g)})}handleGrid(t,r,n){for(;n.length>0;){let i=n.pop();F(i,"bpmn:SubProcess")&&this.handlePlane(i),this.handle("addToGrid",{element:i,grid:t,visited:r,stack:n}).flat().forEach(s=>{n.push(s),r.add(s)})}}getProcess(){return this.diagram.get("rootElements").find(t=>t.$type==="bpmn:Process")}};function Mn(e){return new ot().layoutProcess(e)}window.BpmnAutoLayout=ut;})();
